"use strict";(self.webpackChunknightwood_frontend=self.webpackChunknightwood_frontend||[]).push([[214],{5214:(Ri,pe,d)=>{d.r(pe),d.d(pe,{GameModule:()=>q});var c=d(6895),C=d(7715),l=d(4006),s=d(8747),T=d(1758),g=d(2402),h=d(9751),b=d(1135),u=d(8505),Z=d(262);const fe=[{step:T.Cr.Trait,question:"dragon.traitQuestion",answers:[{label:"dragon.fireTrait",points:[{nature:s.KP.Fire,value:90},{nature:s.KP.Water,value:30},{nature:s.KP.Wind,value:10},{nature:s.KP.Earth,value:40}]},{label:"dragon.waterTrait",points:[{nature:s.KP.Fire,value:40},{nature:s.KP.Water,value:100},{nature:s.KP.Wind,value:30},{nature:s.KP.Earth,value:20}]},{label:"dragon.windTrait",points:[{nature:s.KP.Fire,value:20},{nature:s.KP.Water,value:20},{nature:s.KP.Wind,value:90},{nature:s.KP.Earth,value:5}]},{label:"dragon.earthTrait",points:[{nature:s.KP.Fire,value:15},{nature:s.KP.Water,value:25},{nature:s.KP.Wind,value:10},{nature:s.KP.Earth,value:80}]}]},{step:T.Cr.Value,question:"dragon.valueQuestion",answers:[{label:"dragon.fireValue",points:[{nature:s.KP.Fire,value:80},{nature:s.KP.Water,value:60},{nature:s.KP.Wind,value:50},{nature:s.KP.Earth,value:50}]},{label:"dragon.waterValue",points:[{nature:s.KP.Fire,value:10},{nature:s.KP.Water,value:80},{nature:s.KP.Wind,value:50},{nature:s.KP.Earth,value:30}]},{label:"dragon.windValue",points:[{nature:s.KP.Fire,value:70},{nature:s.KP.Water,value:40},{nature:s.KP.Wind,value:90},{nature:s.KP.Earth,value:20}]},{label:"dragon.earthValue",points:[{nature:s.KP.Fire,value:30},{nature:s.KP.Water,value:50},{nature:s.KP.Wind,value:20},{nature:s.KP.Earth,value:70}]}]},{step:T.Cr.Location,question:"dragon.locationQuestion",answers:[{label:"dragon.fireLocation",points:[{nature:s.KP.Fire,value:60},{nature:s.KP.Water,value:40},{nature:s.KP.Wind,value:50},{nature:s.KP.Earth,value:50}]},{label:"dragon.waterLocation",points:[{nature:s.KP.Fire,value:0},{nature:s.KP.Water,value:90},{nature:s.KP.Wind,value:30},{nature:s.KP.Earth,value:40}]},{label:"dragon.windLocation",points:[{nature:s.KP.Fire,value:30},{nature:s.KP.Water,value:10},{nature:s.KP.Wind,value:60},{nature:s.KP.Earth,value:50}]},{label:"dragon.earthLocation",points:[{nature:s.KP.Fire,value:40},{nature:s.KP.Water,value:10},{nature:s.KP.Wind,value:10},{nature:s.KP.Earth,value:60}]}]}];var e=d(8274),x=d(3022),ae=d(2257),f=d(6621),v=d(208),se=d(253),m=d(4463);function ve(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.saveAnswer(r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.label)," ")}}function be(i,n){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",10),e.YNc(5,ve,4,3,"div",11),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.question)),e.xp6(3),e.Q6J("ngForOf",t.answers)}}function Ce(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,be,6,4,"div",7),e.qZA()),2&i){const t=n.$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.step===o.currentStep)}}function Ze(i,n){1&i&&e._UZ(0,"app-input-base",19),2&i&&e.Q6J("options",n.$implicit)}function we(i,n){if(1&i&&(e.TgZ(0,"button",20),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("disabled",!t.adoptForm.valid),e.xp6(1),e.hij(" ",e.lcZ(2,2,"dragon.adopt")," ")}}function Me(i,n){if(1&i&&(e.TgZ(0,"div",21)(1,"app-loading-indicator"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,1,t.adopt$)," ")}}function Ae(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"form",15),e.NdJ("ngSubmit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.adoptDragon())}),e.TgZ(2,"div",9),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ze,1,1,"app-input-base",16),e.YNc(6,we,3,4,"button",17),e.ALo(7,"async"),e.YNc(8,Me,4,3,"div",18),e.ALo(9,"async"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.adoptForm),e.xp6(2),e.Oqu(e.lcZ(4,5,"dragon.chooseDragonName")),e.xp6(2),e.Q6J("ngForOf",t.adoptFormFields),e.xp6(1),e.Q6J("ngIf",!e.lcZ(7,7,t.adoptLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,9,t.adoptLoading$))}}class N{constructor(n,t,o,a){this.router=n,this.actionController=t,this.toastService=o,this.validatorService=a,this.adoptStepName=T.Cr,this.adoptSteps=fe,this.currentStep=T.Cr.Trait,this.adoptAnswers=[],this.adoptForm=new l.cw({name:new l.NI(null,[l.kI.required,l.kI.minLength(g.EN),l.kI.maxLength(g.Eh)])}),this.adoptFormFields=[{form:this.adoptForm,key:"name",label:"",type:"text"}],this.adopt$=new h.y,this.adoptLoading$=new b.X(!1)}ngOnInit(){this.currentStep=T.Cr.Trait,this.adoptAnswers=[]}saveAnswer(n){this.currentStep+=1,this.adoptAnswers.push(n)}determineNature(){const n=Object.keys(s.KP).map(o=>({nature:s.KP[o],points:0}));return this.adoptAnswers.forEach(o=>{o.points.forEach(a=>{n.find(r=>r.nature===a.nature).points+=a.value})}),n.sort((o,a)=>o.points-a.points)[n.length-1].nature}validateDragonName(n){return!((n=n.replace(" ","")).length<g.EN||n.length>g.Eh||!this.validatorService.checkBannedWords(n))}adoptDragon(){if(!this.adoptForm.value.name||!this.adoptForm.valid)return void this.toastService.showError("errors.formInvalid","errors.formInvalidHint");if(!this.validateDragonName(this.adoptForm.value.name))return void this.toastService.showError("errors.formInvalid","errors.formInvalidHint");const n={name:this.adoptForm.value.name,nature:this.determineNature()};this.adoptLoading$?.next(!0),this.adopt$=this.actionController.adoptDragon(n).pipe((0,u.b)(()=>{this.adoptLoading$?.next(!1),this.toastService.showSuccess("common.success","dragon.adoptSuccess"),this.router.navigate(["game","my-dragons"])}),(0,Z.K)(t=>{throw this.adoptLoading$?.next(!1),t}))}}N.\u0275fac=function(n){return new(n||N)(e.Y36(C.F0),e.Y36(s.iQ),e.Y36(x.k),e.Y36(ae.o))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-adopt-dragon"]],decls:12,vars:8,consts:[[1,"wrapper-main"],["currentLocation","adopt-dragon"],[1,"wrapper-content"],[1,"title"],[1,"title-secondary"],[4,"ngFor","ngForOf"],["class","wrapper-form",4,"ngIf"],["class","wrapper-stage",4,"ngIf"],[1,"wrapper-stage"],[1,"question"],[1,"answers-wrapper"],["class","answer",4,"ngFor","ngForOf"],[1,"answer"],[3,"click"],[1,"wrapper-form"],[3,"formGroup","ngSubmit"],[3,"options",4,"ngFor","ngForOf"],["class","btn-base",3,"disabled",4,"ngIf"],["class","spinner",4,"ngIf"],[3,"options"],[1,"btn-base",3,"disabled"],[1,"spinner"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div")(4,"div",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",4),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,Ce,2,1,"div",5),e.YNc(11,Ae,10,11,"div",6),e.qZA()()),2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,4,"dragon.adoptDragonTilte")),e.xp6(3),e.Oqu(e.lcZ(9,6,"dragon.adoptDragonHint")),e.xp6(2),e.Q6J("ngForOf",t.adoptSteps),e.xp6(1),e.Q6J("ngIf",t.currentStep===t.adoptStepName.Name))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.sg,f.g,v.Q,se.r,c.Ov,m.X$],styles:['.color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.title[_ngcontent-%COMP%]{margin-top:10px;font-size:27px;color:#ffeeca}.title-secondary[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:60px;font-size:21px;color:#ffeeca}.wrapper-stage[_ngcontent-%COMP%]{width:clamp(0px,95%,800px);margin:20px auto;letter-spacing:.5px}.question[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.answers-wrapper[_ngcontent-%COMP%]{width:clamp(0px,100%,600px);margin:20px auto;padding:10px;display:grid;gap:1rem;grid-template-areas:"a b" "c d";grid-template-rows:repeat(4,40%)}@keyframes _ngcontent-%COMP%_answerEntrance{0%{opacity:0;transform:scale(.3);filter:hue-rotate(180deg)}to{opacity:1;transform:scale(1);filter:hue-rotate(0deg)}}.answer[_ngcontent-%COMP%]:nth-child(1){grid-area:"a";animation-delay:.1s;background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/fire.jpg)}.answer[_ngcontent-%COMP%]:nth-child(1):hover{background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/fire.jpg)}.answer[_ngcontent-%COMP%]:nth-child(2){grid-area:"b";animation-delay:.2s;background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/water.jpg)}.answer[_ngcontent-%COMP%]:nth-child(2):hover{background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/water.jpg)}.answer[_ngcontent-%COMP%]:nth-child(3){grid-area:"c";animation-delay:calc(3 * .1s);background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/wind.jpg)}.answer[_ngcontent-%COMP%]:nth-child(3):hover{background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/wind.jpg)}.answer[_ngcontent-%COMP%]:nth-child(4){grid-area:"d";animation-delay:.4s;background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/earth.jpg)}.answer[_ngcontent-%COMP%]:nth-child(4):hover{background:linear-gradient(rgba(36,41,54,.5),rgba(36,41,54,.6)),url(/assets/img/adopt-dragon/earth.jpg)}.answer[_ngcontent-%COMP%]{color:#ffeeca;text-shadow:2px 2px #242936;cursor:pointer;font-size:16px;font-weight:500;animation:_ngcontent-%COMP%_answerEntrance .7s ease-in-out;animation-fill-mode:backwards;border-radius:4px;overflow:hidden;line-height:5;box-shadow:0 0 9px #ffeeca;opacity:.8}.answer[_ngcontent-%COMP%]:hover{opacity:1;transition:opacity 1s ease-in-out!important}'],changeDetection:0});var _=d(4004),ye=d(7821),Te=d(8323);function Oe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-alchemy-mixtures",12),e.NdJ("refreshItems",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.refreshMixturesData())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("userItems$",t.userItems$)("brewedMixtures$",t.brewedMixtures$)("mixtureRecipes$",t.mixtureRecipes$)}}function Pe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-alchemy-boosters",13),e.NdJ("refreshItems",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.refreshBoosterData())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("userItems$",t.userItems$)("userDragons$",t.userDragons$)("boosterRecipes$",t.boosterRecipes$)}}class F{constructor(n,t,o){this.alchemyController=n,this.dragonController=t,this.itemController=o,this.displayMixtures=!1,this.displayBoosters=!1,this.boosterRecipes$=new h.y}ngOnInit(){this.getUserItems(),this.getBrewedMixtures(),this.getMixtrueRecipes(),this.getBoosterRecipes(),this.getUserDragons()}getUserItems(){this.userItems$=this.itemController.getOwnedItems().pipe((0,_.U)(n=>n.data))}getBrewedMixtures(){this.brewedMixtures$=this.alchemyController.getOnGoingMixtures({}).pipe((0,_.U)(n=>n.data))}getMixtrueRecipes(){this.mixtureRecipes$=this.alchemyController.getMixtureRecipes()}getBoosterRecipes(){this.boosterRecipes$=this.alchemyController.getBoosterRecipes()}getUserDragons(){this.userDragons$=this.dragonController.getOwned()}refreshMixturesData(){this.getUserItems(),this.getBrewedMixtures()}refreshBoosterData(){this.getUserItems(),this.getUserDragons()}}F.\u0275fac=function(n){return new(n||F)(e.Y36(s.N),e.Y36(s.GE),e.Y36(s.l3))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-alchemy"]],decls:25,vars:14,consts:[[1,"wrapper-main"],["currentLocation","crafting"],[1,"wrapper-content"],[1,"wrapper-alchemy-section"],[1,"wrapper-lore"],[1,"wrapper-lore-img"],["src","assets/img/lore/alchemy-potions.png","draggable","false","alt","Goblin alchemist"],[1,"wrapper-lore-text"],[1,"btn-base","btn-small",3,"click"],[3,"userItems$","brewedMixtures$","mixtureRecipes$","refreshItems",4,"ngIf"],["src","assets/img/lore/alchemy-boosters.png","draggable","false","alt","Goblin alchemist"],[3,"userItems$","userDragons$","boosterRecipes$","refreshItems",4,"ngIf"],[3,"userItems$","brewedMixtures$","mixtureRecipes$","refreshItems"],[3,"userItems$","userDragons$","boosterRecipes$","refreshItems"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"button",8),e.NdJ("click",function(){return t.displayMixtures=!t.displayMixtures}),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.YNc(13,Oe,1,3,"app-alchemy-mixtures",9),e.qZA(),e.TgZ(14,"div",3)(15,"div",4)(16,"div",5),e._UZ(17,"img",10),e.qZA(),e.TgZ(18,"div",7),e._uU(19),e.ALo(20,"translate"),e.TgZ(21,"button",8),e.NdJ("click",function(){return t.displayBoosters=!t.displayBoosters}),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.YNc(24,Pe,1,3,"app-alchemy-boosters",11),e.qZA()()()),2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,6,"alchemy.mixturesHint")," "),e.xp6(3),e.hij(" ",e.lcZ(12,8,"alchemy.toggleOffer")," "),e.xp6(2),e.Q6J("ngIf",t.displayMixtures),e.xp6(6),e.hij(" ",e.lcZ(20,10,"alchemy.boostersHint")," "),e.xp6(3),e.hij(" ",e.lcZ(23,12,"alchemy.toggleOffer")," "),e.xp6(2),e.Q6J("ngIf",t.displayBoosters))},dependencies:[c.O5,f.g,ye.A,Te.d,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-alchemy-section[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #000;background-color:#0000000d;margin:10px auto;max-width:900px;padding:10px}.wrapper-lore[_ngcontent-%COMP%]{display:flex;gap:10px;text-align:left}.wrapper-lore-img[_ngcontent-%COMP%]{min-width:125px;width:125px}.wrapper-lore-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.wrapper-lore-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;text-align:justify}.wrapper-lore-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 0}"],changeDetection:0});var de=d(194),ge=d(8125),me=d(9799);const Ue=["searchMinLevel"],Le=["searchMaxLevel"];function Ge(i,n){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"app-loading-indicator"),e.qZA())}function Ie(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",19),e._uU(4),e.qZA(),e.TgZ(5,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.selectBattleDragon(r))}),e._uU(6),e.ALo(7,"translate"),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.AsE("",t.name," [",t.level,"]"),e.xp6(2),e.Oqu(t.nature),e.xp6(2),e.hij(" ",e.lcZ(7,4,"arena.battle")," ")}}function ke(i,n){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",19),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.YNc(9,Ie,8,6,"div",20),e.qZA()),2&i){const t=n.ngIf;e.xp6(3),e.AsE("",e.lcZ(4,4,"dragon.name")," [",e.lcZ(5,6,"dragon.level"),"]"),e.xp6(4),e.Oqu(e.lcZ(8,8,"dragon.nature")),e.xp6(2),e.Q6J("ngForOf",t)}}function qe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-dragon-choice-modal",23),e.NdJ("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayDragonChoiceModal=!1)})("dragonSelected",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.startBattle(a))}),e.qZA()}if(2&i){const t=e.oxw(),o=e.MAs(27);e.Q6J("message",t.modalMessage)("dragonTemplate",o)}}function Ne(i,n){if(1&i&&(e._uU(0),e.TgZ(1,"div",24),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i){const t=n.$implicit;e.AsE(" ",t.name," [",t.level,"] "),e.xp6(2),e.AsE(" ",t.stamina," ",e.lcZ(3,4,"dragon.stamina")," ")}}function Fe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-dragon-battle",25),e.NdJ("updatedDragon",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleModalClose(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ownedDragon",t.selectedOwnedDragon)("enemyDragon",t.selectedEnemyDragon)}}class O{constructor(n,t,o,a){this.router=n,this.dragonController=t,this.dateService=o,this.toastService=a,this.enemyDragonPage=0,this.enemyDragonLimit=12,this.canGetPrev=!1,this.canGetNext=!0,this.displayDragonChoiceModal=!1,this.modalMessage="",this.battleLoading=!1,this.displayBattle=!1}ngOnInit(){this.getEnemyDragons()}validateSearchParams(){const n=+this.searchMinLevel?.nativeElement.value;if(n&&(n<g.EY||n>g.ut))return!1;const t=+this.searchMaxLevel?.nativeElement.value;return!(t&&(t<g.EY||t>g.ut)||n&&t&&n>t)}getEnemyDragons(n){if(!this.validateSearchParams())return void this.toastService.showError("errors.formInvalid","errors.formInvalidHint");!0===n?this.enemyDragonPage+=1:!1===n?this.enemyDragonPage-=1:this.enemyDragonPage=0,this.enemyDragonPage<0&&(this.enemyDragonPage=0);const t={page:this.enemyDragonPage,limit:this.enemyDragonLimit,minLevel:this.searchMinLevel?.nativeElement.value?Math.floor(+this.searchMinLevel.nativeElement.value):g.EY,maxLevel:this.searchMaxLevel?.nativeElement.value?Math.floor(+this.searchMaxLevel.nativeElement.value):g.ut};this.enemyDragons$=this.dragonController.getAll(t).pipe((0,u.b)(o=>{this.canGetPrev=0!==this.enemyDragonPage,this.canGetNext=(this.enemyDragonPage+1)*this.enemyDragonLimit<o.meta.totalItems}),(0,_.U)(o=>o.data))}navigateAdopt(){this.router.navigate(["game","adopt-dragon"])}selectBattleDragon(n){this.selectedEnemyDragon=n,this.displayDragonChoiceModal=!0}startBattle(n){if(this.displayDragonChoiceModal=!1,this.selectedOwnedDragon=n,n&&this.selectedEnemyDragon){if(n.id==this.selectedEnemyDragon.id)return void this.toastService.showError("errors.error","errors.battleItself");if(n.stamina<1)return void this.toastService.showError("errors.error","errors.noStamina");if(n.battledWith.filter(t=>t===this.selectedEnemyDragon.id).length>1)return void this.toastService.showError("errors.error","errors.alreadyBattled");if(!this.dateService.checkIfEventAvailable(n.action.nextAction))return void this.toastService.showError("errors.error","errors.dragonBusy");this.displayBattle=!0}}handleModalClose(n){n&&this.selectedOwnedDragon&&(this.selectedOwnedDragon.stamina=n.stamina),this.displayBattle=!1}}O.\u0275fac=function(n){return new(n||O)(e.Y36(C.F0),e.Y36(s.GE),e.Y36(de.R),e.Y36(x.k))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-arena"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Ue,5),e.Gf(Le,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.searchMinLevel=o.first),e.iGM(o=e.CRH())&&(t.searchMaxLevel=o.first)}},decls:29,vars:23,consts:[[1,"wrapper-main"],["currentLocation","arena"],[1,"wrapper-content"],[1,"wrapper-menu"],["type","number",1,"input-text",3,"placeholder"],["searchMinLevel",""],["searchMaxLevel",""],[1,"btn-base","btn-search",3,"click"],[1,"wrapper-table"],["enemyDragonsLoading",""],["class","wrapper-dragons",4,"ngIf","ngIfElse"],[1,"wrapper-table-btns"],[1,"btn-base","btn-table",3,"disabled","click"],[3,"message","dragonTemplate","close","dragonSelected",4,"ngIf"],["dragonTemplate",""],[3,"ownedDragon","enemyDragon","updatedDragon",4,"ngIf"],[2,"margin","220px auto"],[1,"wrapper-dragons"],[1,"item-dragon","item-dragon-header"],[1,"no-mobile"],["class","item-dragon",4,"ngFor","ngForOf"],[1,"item-dragon"],[1,"btn-base","btn-battle",3,"click"],[3,"message","dragonTemplate","close","dragonSelected"],[1,"label-small"],[3,"ownedDragon","enemyDragon","updatedDragon"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3),e._UZ(4,"input",4,5),e.ALo(6,"translate"),e._UZ(7,"input",4,6),e.ALo(9,"translate"),e.TgZ(10,"button",7),e.NdJ("click",function(){return t.getEnemyDragons()}),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"div",8),e.YNc(14,Ge,2,0,"ng-template",null,9,e.W1O),e.YNc(16,ke,10,10,"div",10),e.ALo(17,"async"),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return t.getEnemyDragons(!1)}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return t.getEnemyDragons(!0)}),e._uU(23),e.ALo(24,"translate"),e.qZA()()()(),e.YNc(25,qe,1,2,"app-dragon-choice-modal",13),e.YNc(26,Ne,4,6,"ng-template",null,14,e.W1O),e.YNc(28,Fe,1,2,"app-dragon-battle",15),e.qZA()),2&n){const o=e.MAs(15);e.xp6(4),e.s9C("placeholder",e.lcZ(6,11,"auctions.minLevel")),e.xp6(3),e.s9C("placeholder",e.lcZ(9,13,"auctions.maxLevel")),e.xp6(4),e.hij(" ",e.lcZ(12,15,"common.search")," "),e.xp6(5),e.Q6J("ngIf",e.lcZ(17,17,t.enemyDragons$))("ngIfElse",o),e.xp6(3),e.Q6J("disabled",!t.canGetPrev),e.xp6(1),e.hij(" ",e.lcZ(21,19,"common.prev")," "),e.xp6(2),e.Q6J("disabled",!t.canGetNext),e.xp6(1),e.hij(" ",e.lcZ(24,21,"common.next")," "),e.xp6(2),e.Q6J("ngIf",t.displayDragonChoiceModal),e.xp6(3),e.Q6J("ngIf",t.displayBattle)}},dependencies:[c.sg,c.O5,f.g,v.Q,ge.q,me._,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:10px 0px;padding:10px}.wrapper-menu[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:25px auto -15px}.wrapper-menu[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]{width:49%;margin:10px auto 5px}.wrapper-menu[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]:first-of-type{margin-right:1%}.wrapper-menu[_ngcontent-%COMP%]   .input-text[_ngcontent-%COMP%]:last-of-type{margin-left:1%}.wrapper-menu[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{width:100%;max-width:100%;height:24px;line-height:22px}.wrapper-table[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:10px auto;justify-content:space-between;align-items:stretch}.wrapper-dragons[_ngcontent-%COMP%]{margin:5px auto 10px;display:flex;gap:1px;flex-direction:column;align-items:center}.item-dragon[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:grid;grid-template-columns:200px 100px 100px;text-align:left}.item-dragon[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.item-dragon-header[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 8px 1px #ffeeca;background-color:#ffeeca0d;margin-bottom:4px;border-bottom:2px solid #FFEECA;font-weight:600}.item-dragon-header[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 8px 1px #ffe6b1;background-color:#ffe6b10d}.btn-battle[_ngcontent-%COMP%]{width:72px;height:24px;line-height:24px;text-align:center}.wrapper-table-btns[_ngcontent-%COMP%]{width:100%;margin-top:10px;display:flex;gap:1%}.wrapper-table-btns[_ngcontent-%COMP%]   .btn-table[_ngcontent-%COMP%]{width:50%;height:24px;line-height:24px}@media screen and (max-width: 990px){.item-dragon[_ngcontent-%COMP%]{padding:5px;display:flex;justify-content:space-between;text-align:left}.btn-battle[_ngcontent-%COMP%]{margin-right:2px}}"],changeDetection:0});var A=d(4549),ce=d(6352),Se=d(7654),$e=d(3688),ue=d(7937);const Je=["searchName"],Ee=["searchMinLevel"],De=["searchMaxLevel"],Qe=["searchRarity"],Ye=["searchType"];function Re(i,n){1&i&&(e.TgZ(0,"div",24),e._UZ(1,"app-loading-indicator"),e.qZA())}function Ke(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.confirmBuyAuction(a))}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"auctions.buy")," ")}}function He(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.cancelAuction(a.id))}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"common.cancel")," ")}}const je=function(i){return{price:i}};function Be(i,n){if(1&i&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),e._UZ(4,"app-item-display",30),e.TgZ(5,"div",31),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"br"),e._uU(9),e.ALo(10,"translate"),e.TgZ(11,"div",32),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",33),e._uU(15),e.ALo(16,"translate"),e.ALo(17,"date"),e.qZA()(),e.YNc(18,Ke,4,6,"button",34),e.YNc(19,He,4,6,"button",34),e.qZA()()),2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(4),e.Q6J("item",t.item)("simplified",!0),e.xp6(2),e.AsE(" ",e.lcZ(7,11,"auctions.quantity"),": ",t.quantity," "),e.xp6(3),e.AsE(" ",e.lcZ(10,13,"auctions.price"),": ",t.totalGoldPrice," "),e.xp6(3),e.hij(" (",e.xi3(13,15,"auctions.unitPriceCalculated",e.VKq(23,je,t.totalGoldPrice/t.quantity)),") "),e.xp6(3),e.AsE(" ",e.lcZ(16,18,"auctions.endTime"),": ",e.xi3(17,20,t.endTime,"short")," "),e.xp6(3),e.Q6J("ngIf",t.sellerId!==o.user.id),e.xp6(1),e.Q6J("ngIf",t.sellerId===o.user.id)}}function We(i,n){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,Be,20,25,"div",25),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Xe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getAuctions(!1))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getAuctions(!0))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.canGetPrev),e.xp6(1),e.hij(" ",e.lcZ(3,4,"common.prev")," "),e.xp6(2),e.Q6J("disabled",!t.canGetNext),e.xp6(1),e.hij(" ",e.lcZ(6,6,"common.next")," ")}}function ze(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-auction-create",36),e.NdJ("close",function(){e.CHM(t);const a=e.oxw();return a.getAuctions(!1),e.KtG(a.displayCreateForm=!1)}),e.qZA()}}const Ve=function(i,n,t){return{quantity:i,name:n,gold:t}};function et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-confirm-modal",37),e.NdJ("confirm",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.buyAuction(a.selectedAuction.id))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayBuyAuctionModal=!1)}),e.ALo(1,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("message",e.xi3(1,1,"auctions.confirmPurchaseMessage",e.kEZ(4,Ve,t.selectedAuction.quantity,t.selectedAuction.displayItem.name,t.selectedAuction.totalGoldPrice)))}}class S{constructor(n,t,o,a,r){this.actionController=n,this.auctionController=t,this.engineService=o,this.toastService=a,this.itemsService=r,this.displayOwned=!1,this.displayCreateForm=!1,this.displayBuyAuctionModal=!1,this.actionLoading$=new b.X(!1),this.ItemType=s.qG,this.ItemRarity=s.RG,this.currentPage=0,this.pageLimit=9,this.canGetPrev=!1,this.canGetNext=!0}ngOnInit(){this.user=this.engineService.user,this.getAuctions()}validateSearchParams(){const n=this.searchName?.nativeElement.value;if(n&&(n.length<g.CV||n.length>g.wO))return!1;const t=+this.searchMinLevel?.nativeElement.value;if(t&&(t<g.f5||t>g.dj))return!1;const o=+this.searchMaxLevel?.nativeElement.value;return!(o&&(o<g.f5||o>g.dj)||t&&o&&t>o)}getAuctions(n){if(!this.validateSearchParams())return void this.toastService.showError("errors.formInvalid","errors.formInvalidHint");!0===n?this.currentPage+=1:!1===n?this.currentPage-=1:this.currentPage=0,this.currentPage<0&&(this.currentPage=0);const t={page:this.currentPage,limit:this.pageLimit,ownedByUser:this.displayOwned,name:this.searchName?.nativeElement.value,type:this.searchType?.nativeElement.value??void 0,requiredRarity:this.searchRarity?.nativeElement.value??void 0,minLevel:this.searchMinLevel?.nativeElement.value?Math.floor(+this.searchMinLevel.nativeElement.value):g.f5,maxLevel:this.searchMaxLevel?.nativeElement.value?Math.floor(+this.searchMaxLevel.nativeElement.value):g.dj};this.actionLoading$.next(!0),this.auctions$=this.auctionController.getAll(t).pipe((0,u.b)(o=>{this.canGetPrev=0!==this.currentPage,this.canGetNext=(this.currentPage+1)*this.pageLimit<o.meta.totalItems,this.actionLoading$.next(!1)}),(0,_.U)(o=>o.data),(0,_.U)(o=>this.displayOwned?o.filter(a=>a.sellerId===this.user.id):o))}changeMode(n){this.displayOwned=n,this.currentPage=0,this.getAuctions()}confirmBuyAuction(n){this.selectedAuction=this.itemsService.toDisplayAuction(n),this.displayBuyAuctionModal=!0}buyAuction(n){this.displayBuyAuctionModal=!1,this.actionLoading$.next(!0),this.actionController.buyAuction(n.toString()).subscribe(t=>{this.toastService.showSuccess("common.success","auctions.purchaseCompleted"),this.user.gold=this.user.gold-t.consumedGold,this.engineService.updateUser({gold:this.user.gold}),this.getAuctions()},()=>this.actionLoading$.next(!1))}cancelAuction(n){this.actionLoading$.next(!0),this.auctionController.cancel(n.toString()).subscribe(()=>{this.toastService.showSuccess("common.success","auctions.offerCancelled"),this.getAuctions()},()=>this.actionLoading$.next(!1))}}S.\u0275fac=function(n){return new(n||S)(e.Y36(s.iQ),e.Y36(s.wY),e.Y36(A.S),e.Y36(x.k),e.Y36(ce.L))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-auctions"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Je,5),e.Gf(Ee,5),e.Gf(De,5),e.Gf(Qe,5),e.Gf(Ye,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.searchName=o.first),e.iGM(o=e.CRH())&&(t.searchMinLevel=o.first),e.iGM(o=e.CRH())&&(t.searchMaxLevel=o.first),e.iGM(o=e.CRH())&&(t.searchRarity=o.first),e.iGM(o=e.CRH())&&(t.searchType=o.first)}},decls:71,vars:76,consts:[[1,"wrapper-main"],["currentLocation","auctions"],[1,"wrapper-content"],[1,"wrapper-auctions"],[1,"wrapper-menu"],[1,"btn-base","btn-mode",3,"disabled","click"],[1,"wrapper-menu","wrapper-search"],[1,"input-text",3,"placeholder"],["searchName",""],["type","number",1,"input-text",3,"placeholder"],["searchMinLevel",""],["searchMaxLevel",""],[1,"input-select"],["searchRarity",""],["value",""],[3,"value"],["searchType",""],[1,"btn-base","btn-search",3,"disabled","click"],[1,"wrapper-table"],["auctionsLoading",""],["class","wrapper-auctions",4,"ngIf","ngIfElse"],["class","wrapper-menu",4,"ngIf"],[3,"close",4,"ngIf"],["title","auctions.confirmPurchase",3,"message","confirm","close",4,"ngIf"],[2,"margin","30px auto"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"width","100%"],[1,"item-auction"],[2,"width","100%","display","flex","align-items","center"],[1,"item-auction-data"],[2,"width","45px","height","45px",3,"item","simplified"],[2,"margin-left","16px"],[1,"inline","no-mobile"],[1,"no-mobile"],["class","btn-base btn-auction",3,"disabled","click",4,"ngIf"],[1,"btn-base","btn-auction",3,"disabled","click"],[3,"close"],["title","auctions.confirmPurchase",3,"message","confirm","close"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5),e.NdJ("click",function(){return t.changeMode(!1)}),e.ALo(6,"async"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return t.changeMode(!0)}),e.ALo(10,"async"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",5),e.NdJ("click",function(){return t.displayCreateForm=!0}),e.ALo(14,"async"),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"div",6),e._UZ(18,"input",7,8),e.ALo(20,"translate"),e._UZ(21,"input",9,10),e.ALo(23,"translate"),e._UZ(24,"input",9,11),e.ALo(26,"translate"),e.TgZ(27,"select",12,13)(29,"option",14),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"option",15),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"option",15),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"option",15),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"option",15),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"select",12,16)(46,"option",14),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"option",15),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"option",15),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"option",15),e._uU(56),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"button",17),e.NdJ("click",function(){return t.getAuctions()}),e.ALo(59,"async"),e._uU(60),e.ALo(61,"translate"),e.qZA()(),e.TgZ(62,"div",18),e.YNc(63,Re,2,0,"ng-template",null,19,e.W1O),e.YNc(65,We,2,1,"div",20),e.ALo(66,"async"),e.qZA(),e.YNc(67,Xe,7,8,"div",21),e.ALo(68,"async"),e.qZA()()(),e.YNc(69,ze,1,0,"app-auction-create",22),e.YNc(70,et,2,8,"app-confirm-modal",23)),2&n){const o=e.MAs(64);e.xp6(5),e.Q6J("disabled",e.lcZ(6,32,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(8,34,"auctions.all")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(10,36,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(12,38,"auctions.owned")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(14,40,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(16,42,"auctions.addOffer")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(20,44,"auctions.name")),e.xp6(3),e.s9C("placeholder",e.lcZ(23,46,"auctions.minLevel")),e.xp6(3),e.s9C("placeholder",e.lcZ(26,48,"auctions.maxLevel")),e.xp6(6),e.Oqu(e.lcZ(31,50,"auctions.itemRarity")),e.xp6(2),e.Q6J("value",t.ItemRarity.Common),e.xp6(1),e.Oqu(e.lcZ(34,52,"enums.itemRarity.Common")),e.xp6(2),e.Q6J("value",t.ItemRarity.Scarce),e.xp6(1),e.Oqu(e.lcZ(37,54,"enums.itemRarity.Scarce")),e.xp6(2),e.Q6J("value",t.ItemRarity.Rare),e.xp6(1),e.Oqu(e.lcZ(40,56,"enums.itemRarity.Rare")),e.xp6(2),e.Q6J("value",t.ItemRarity.Mythical),e.xp6(1),e.Oqu(e.lcZ(43,58,"enums.itemRarity.Mythical")),e.xp6(5),e.Oqu(e.lcZ(48,60,"auctions.itemType")),e.xp6(2),e.Q6J("value",t.ItemType.Food),e.xp6(1),e.Oqu(e.lcZ(51,62,"enums.itemType.Food")),e.xp6(2),e.Q6J("value",t.ItemType.Ingredient),e.xp6(1),e.Oqu(e.lcZ(54,64,"enums.itemType.Ingredient")),e.xp6(2),e.Q6J("value",t.ItemType.Equipment),e.xp6(1),e.Oqu(e.lcZ(57,66,"enums.itemType.Equipment")),e.xp6(2),e.Q6J("disabled",e.lcZ(59,68,t.actionLoading$)),e.xp6(2),e.hij(" ",e.lcZ(61,70,"common.search")," "),e.xp6(5),e.Q6J("ngIf",e.lcZ(66,72,t.auctions$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",!e.lcZ(68,74,t.actionLoading$)&&(t.canGetPrev||t.canGetNext)),e.xp6(2),e.Q6J("ngIf",t.displayCreateForm),e.xp6(1),e.Q6J("ngIf",t.selectedAuction&&t.displayBuyAuctionModal)}},dependencies:[c.sg,c.O5,l.YN,l.Kr,Se.A,f.g,v.Q,$e.z,ue.s,c.Ov,c.uU,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-content[_ngcontent-%COMP%]{overflow-x:auto}.wrapper-auctions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.wrapper-menu[_ngcontent-%COMP%]{width:clamp(200px,95%,800px);margin:auto;display:flex;gap:2px}.wrapper-menu[_ngcontent-%COMP%]   .btn-mode[_ngcontent-%COMP%]{width:50%;margin:0;line-height:2;border-radius:2px}.wrapper-search[_ngcontent-%COMP%]{margin-top:-2px;display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-template-rows:repeat(30px);justify-items:stretch;align-items:stretch;gap:0px 2px}.wrapper-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .wrapper-search[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .wrapper-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto;margin:3px 0 0}.wrapper-search[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{max-width:none;height:25px;line-height:25px}.wrapper-table[_ngcontent-%COMP%]{width:clamp(200px,95%,800px);height:590px;margin:auto;padding-bottom:4px;background:#242936;border-radius:2px;overflow:visible}.wrapper-auctions[_ngcontent-%COMP%]{width:100%;margin:5px auto 10px;padding:0 5px;display:flex;gap:5px;flex-direction:column;align-items:center;overflow:visible}.item-auction[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #384055;background-color:#3840550d;width:clamp(200px,100%,100%);height:60px;display:flex;justify-content:space-between;align-items:center;text-align:left;padding:0 10px}.item-auction[_ngcontent-%COMP%]   .item-auction-data[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center}.item-auction[_ngcontent-%COMP%]   .btn-auction[_ngcontent-%COMP%]{height:24px;width:60px;margin:0;line-height:24px;text-align:center}@media screen and (max-width: 990px){.item-auction[_ngcontent-%COMP%]{justify-content:center}.item-auction[_ngcontent-%COMP%]   .item-auction-data[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0});var tt=d(6990);function nt(i,n){1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-loading-indicator"),e.qZA())}function it(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-crafting-item-list",14),e.NdJ("refreshItems",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getOwnedItems())}),e.qZA()}if(2&i){const t=n.ngIf;e.Q6J("items",t.items)("recipes",t.recipes)}}const _e=function(i,n){return{items:i,recipes:n}};function ot(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,nt,2,0,"div",11),e.ALo(2,"async"),e.YNc(3,it,1,2,"app-crafting-item-list",12),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()),2&i){const t=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",!(null!=(o=e.lcZ(2,2,t.recipesBase$))&&o.length)),e.xp6(2),e.Q6J("ngIf",e.WLB(8,_e,e.lcZ(4,4,t.items$),e.lcZ(5,6,t.recipesBase$)))}}function at(i,n){1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-loading-indicator"),e.qZA())}function rt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-crafting-item-list",14),e.NdJ("refreshItems",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getOwnedItems())}),e.qZA()}if(2&i){const t=n.ngIf;e.Q6J("items",t.items)("recipes",t.recipes)}}function st(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,at,2,0,"div",11),e.ALo(2,"async"),e.YNc(3,rt,1,2,"app-crafting-item-list",12),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()),2&i){const t=e.oxw();let o;e.xp6(1),e.Q6J("ngIf",!(null!=(o=e.lcZ(2,2,t.recipesSpecial$))&&o.length)),e.xp6(2),e.Q6J("ngIf",e.WLB(8,_e,e.lcZ(4,4,t.items$),e.lcZ(5,6,t.recipesSpecial$)))}}class ${constructor(n){this.itemController=n,this.items$=new h.y,this.recipesBase$=new h.y,this.recipesSpecial$=new h.y,this.displayBaseRecipes=!1,this.displaySpecialRecipes=!1}ngOnInit(){this.getOwnedItems(),this.getRecipes()}getOwnedItems(){this.items$=this.itemController.getOwnedItems().pipe((0,_.U)(n=>n.data))}getRecipes(){this.recipesBase$=this.itemController.getRuneBaseRecipes(),this.recipesSpecial$=this.itemController.getRuneSpecialRecipes()}}$.\u0275fac=function(n){return new(n||$)(e.Y36(s.l3))},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-crafting"]],decls:27,vars:14,consts:[[1,"wrapper-main"],["currentLocation","crafting"],[1,"wrapper-content"],[1,"wrapper-crafting-section"],[1,"wrapper-lore"],[1,"wrapper-lore-img"],["src","assets/img/lore/crafting-base-runes.png","draggable","false","alt","Goblin thinkerer"],[1,"wrapper-lore-text"],[1,"btn-base","btn-small",3,"click"],[4,"ngIf"],["src","assets/img/lore/crafting-special-runes.png","draggable","false","alt","Goblin thinkerer"],["style","margin: 30px auto;",4,"ngIf"],[3,"items","recipes","refreshItems",4,"ngIf"],[2,"margin","30px auto"],[3,"items","recipes","refreshItems"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"div"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return t.displayBaseRecipes=!t.displayBaseRecipes}),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.YNc(14,ot,6,11,"div",9),e.qZA(),e.TgZ(15,"div",3)(16,"div",4)(17,"div",5),e._UZ(18,"img",10),e.qZA(),e.TgZ(19,"div",7)(20,"div"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",8),e.NdJ("click",function(){return t.displaySpecialRecipes=!t.displaySpecialRecipes}),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.YNc(26,st,6,11,"div",9),e.qZA()()()),2&n&&(e.xp6(9),e.Oqu(e.lcZ(10,6,"crafting.runeCraftingBaseHint")),e.xp6(3),e.hij(" ",e.lcZ(13,8,"alchemy.toggleOffer")," "),e.xp6(2),e.Q6J("ngIf",t.displayBaseRecipes),e.xp6(7),e.Oqu(e.lcZ(22,10,"crafting.runeCraftingSpecialHint")),e.xp6(3),e.hij(" ",e.lcZ(25,12,"alchemy.toggleOffer")," "),e.xp6(2),e.Q6J("ngIf",t.displaySpecialRecipes))},dependencies:[c.O5,f.g,v.Q,tt.f,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-crafting-section[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #000;background-color:#0000000d;margin:10px auto;max-width:900px;padding:10px}.wrapper-lore[_ngcontent-%COMP%]{display:flex;gap:10px;text-align:left}.wrapper-lore-img[_ngcontent-%COMP%]{min-width:125px;width:125px}.wrapper-lore-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.wrapper-lore-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;text-align:justify}.wrapper-lore-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 0}@media screen and (max-width: 990px){.wrapper-lore[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:justify}.wrapper-lore[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:125px}}"],changeDetection:0});var re=d(5770);function ct(i,n){1&i&&(e.TgZ(0,"div",9),e._UZ(1,"app-loading-indicator"),e.qZA())}function lt(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=n.$implicit,o=n.index,a=e.oxw(2).$implicit;e.Tol("inline color-"+t.rarity),e.xp6(1),e.hij(" ",t.name+" ("+t.quantity+")"+(o+1<a.requiredItems.length?", ":"")," ")}}function pt(i,n){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"translate"),e.YNc(3,lt,2,3,"div",19),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"dragonTamer.requiredItems"),": "),e.xp6(2),e.Q6J("ngForOf",t.requiredItems)}}function dt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"input",14,15),e.ALo(7,"async"),e.ALo(8,"translate"),e.qZA(),e.YNc(9,pt,4,4,"div",16),e.TgZ(10,"div",17),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.MAs(6),y=e.oxw(2);return e.KtG(y.summonDragon(r,p.value))}),e.ALo(14,"async"),e._uU(15),e.ALo(16,"translate"),e.qZA()()}if(2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,8,t.hint)," "),e.xp6(3),e.s9C("placeholder",e.lcZ(8,12,"auctions.name")),e.Q6J("disabled",e.lcZ(7,10,o.actionsLoading$)),e.xp6(4),e.Q6J("ngIf",t.requiredItems&&t.requiredItems.length),e.xp6(2),e.AsE(" ",e.lcZ(12,14,"dragonTamer.actionCost"),": ",t.cost," "),e.xp6(2),e.Q6J("disabled",e.lcZ(14,16,o.actionsLoading$)),e.xp6(2),e.hij(" ",e.lcZ(16,18,"dragonSummon.summon")," ")}}function gt(i,n){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,dt,17,20,"div",11),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}class J{constructor(n,t,o,a,r,p,y){this.router=n,this.actionController=t,this.dragonController=o,this.toastService=a,this.validatorService=r,this.engineService=p,this.repositoryService=y,this.actions$=new h.y,this.actionsLoading$=new b.X(!1)}ngOnInit(){this.user=this.repositoryService.getUserData(),this.getSummonActions()}getSummonActions(){this.actions$=this.dragonController.getSummonActions()}summonDragon(n,t){if(!this.validatorService.checkBannedWords(t))return;if(t.length<g.EN||t.length>g.Eh)return void this.toastService.showError("errors.error","errors.dragonNameIncorrectLength",null,{min:g.EN,max:g.Eh});if(this.user&&this.user.gold<n.cost)return void this.toastService.showError("errors.error","errors.insufficientsFound");const o={actionUid:n.uid,name:t,nature:n.nature};this.actionsLoading$.next(!0),this.actionController.summonDragon(o).subscribe(a=>{this.toastService.showSuccess("common.success","dragonSummon.summonSuccess"),this.actionsLoading$.next(!1),this.engineService.tick(),this.router.navigate(["game","my-dragons"])},()=>this.actionsLoading$.next(!1))}}J.\u0275fac=function(n){return new(n||J)(e.Y36(C.F0),e.Y36(s.iQ),e.Y36(s.GE),e.Y36(x.k),e.Y36(ae.o),e.Y36(A.S),e.Y36(re.b))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-dragon-summon"]],decls:13,vars:7,consts:[[1,"wrapper-main"],["currentLocation","dragon-summoner"],[1,"wrapper-content"],[1,"wrapper-actions-section"],[1,"wrapper-lore"],[1,"wrapper-lore-img"],["src","assets/img/lore/dragon-summoner.png","draggable","false","alt","Dragon summoner"],["loading",""],["class","wrapper-actions",4,"ngIf","ngIfElse"],[2,"margin","30px auto"],[1,"wrapper-actions"],["class","item-action",4,"ngFor","ngForOf"],[1,"item-action"],[1,"action-hint"],[1,"input-text",3,"disabled","placeholder"],["nameInput",""],["class","cost-hint",4,"ngIf"],[1,"cost-hint"],[1,"btn-base","btn-action",3,"disabled","click"],[3,"class",4,"ngFor","ngForOf"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,ct,2,0,"ng-template",null,7,e.W1O),e.YNc(11,gt,2,1,"div",8),e.ALo(12,"async"),e.qZA()()()),2&n){const o=e.MAs(10);e.xp6(7),e.hij(" ",e.lcZ(8,3,"dragonSummon.dragonSummonerHint")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(12,5,t.actions$))("ngIfElse",o)}},dependencies:[c.sg,c.O5,f.g,v.Q,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-actions-section[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #000;background-color:#0000000d;margin:0 10px 10px;max-width:900px;padding:10px}.wrapper-lore[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;text-align:left;gap:10px}.wrapper-lore-img[_ngcontent-%COMP%]{min-width:125px;width:125px}.wrapper-lore-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.item-action[_ngcontent-%COMP%]{margin-top:10px;padding:10px;text-align:left;background-color:#242936}.btn-action[_ngcontent-%COMP%]{width:240px;height:22px;margin:10px 0;line-height:22px}@media screen and (max-width: 990px){.wrapper-lore[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:justify}}"],changeDetection:0});const mt=["nameInput"],ut=["newNatureSelect"];function _t(i,n){1&i&&(e.TgZ(0,"div",9),e._UZ(1,"app-loading-indicator"),e.qZA())}function ht(i,n){if(1&i&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",n.index),e.xp6(1),e.AsE(" ",t.name," [",t.level,"] ")}}function xt(i,n){1&i&&(e.TgZ(0,"div")(1,"div",23),e._uU(2,"New name:"),e.qZA(),e._UZ(3,"input",24,25),e.ALo(5,"translate"),e.qZA()),2&i&&(e.xp6(3),e.s9C("placeholder",e.lcZ(5,1,"auctions.name")))}function ft(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,t.name))}}function vt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",23),e._uU(2,"New nature:"),e.qZA(),e.TgZ(3,"select",26,27),e._UZ(5,"option",16),e.YNc(6,ft,3,4,"option",28),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(6),e.Q6J("ngForOf",t.basicNatures)}}function bt(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=n.$implicit,o=n.index,a=e.oxw(2).$implicit;e.Tol("inline color-"+t.rarity),e.xp6(1),e.hij(" ",t.name+" ("+t.quantity+")"+(o+1<a.requiredItems.length?", ":"")," ")}}function Ct(i,n){if(1&i&&(e.TgZ(0,"div",30),e._uU(1),e.ALo(2,"translate"),e.YNc(3,bt,2,3,"div",31),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"dragonTamer.requiredItems"),": "),e.xp6(2),e.Q6J("ngForOf",t.requiredItems)}}function Zt(i,n){if(1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"dragonTamer.currentDragonLimit"),": ",null==t.user?null:t.user.maxOwnedDragons," ")}}function wt(i,n){if(1&i&&(e.TgZ(0,"div",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.MAs(5),a=e.oxw().ngIf;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"dragonTamer.actionCost"),": ",""!=o.value&&a.dragons?t.baseCost+a.dragons[+o.value].level*t.costFactor:"---"," ")}}function Mt(i,n){if(1&i&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"dragonTamer.actionCost"),": ",t.baseCost+t.costFactor*(null!=o.user&&o.user.maxOwnedDragons?o.user.maxOwnedDragons-o.DRAGON_BASE_LIMIT:0)," ")}}function At(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.MAs(5),p=e.oxw().ngIf,y=e.oxw();return e.KtG(y.performAction(a,p.dragons[+r.value]))}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){e.oxw();const t=e.MAs(5),o=e.oxw(2);e.Q6J("disabled",""==t.value||e.lcZ(1,2,o.dragonsLoading$)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"common.confirm")," ")}}function yt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.performActionWithoutDragon(a))}),e.ALo(1,"async"),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",e.lcZ(1,2,t.dragonsLoading$)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"dragonTamer.extend")," ")}}function Tt(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",14,15),e.NdJ("change",function(){return 0}),e._UZ(6,"option",16),e.YNc(7,ht,2,3,"option",17),e.qZA(),e.YNc(8,xt,6,3,"div",18),e.YNc(9,vt,7,1,"div",18),e.YNc(10,Ct,4,4,"div",19),e.YNc(11,Zt,3,4,"div",20),e.YNc(12,wt,3,4,"div",19),e.YNc(13,Mt,3,4,"div",20),e.YNc(14,At,4,6,"button",21),e.YNc(15,yt,4,6,"button",21),e.qZA()),2&i){const t=n.$implicit,o=e.oxw().ngIf;e.xp6(2),e.hij(" ",e.lcZ(3,11,t.hint)," "),e.xp6(2),e.Q6J("hidden",t.withoutDragon),e.xp6(3),e.Q6J("ngForOf",o.dragons),e.xp6(1),e.Q6J("ngIf","tamer-action-1"===t.uid),e.xp6(1),e.Q6J("ngIf","tamer-action-4"===t.uid),e.xp6(1),e.Q6J("ngIf",t.requiredItems&&t.requiredItems.length),e.xp6(1),e.Q6J("ngIf","tamer-action-5"===t.uid),e.xp6(1),e.Q6J("ngIf",!t.withoutDragon),e.xp6(1),e.Q6J("ngIf",t.withoutDragon),e.xp6(1),e.Q6J("ngIf",!t.withoutDragon),e.xp6(1),e.Q6J("ngIf",t.withoutDragon)}}function Ot(i,n){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,Tt,16,13,"div",11),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t.actions)}}const Pt=function(i,n,t){return{user:i,actions:n,dragons:t}};class E{constructor(n,t,o,a,r,p){this.actionController=n,this.dragonController=t,this.toastService=o,this.validatorService=a,this.engineService=r,this.repositoryService=p,this.DRAGON_BASE_LIMIT=g.FO,this.actionsLoading$=new b.X(!1),this.dragonsLoading$=new b.X(!1)}get basicNatures(){return[{value:s.KP.Fire,name:"enums.dragonNature.Fire"},{value:s.KP.Water,name:"enums.dragonNature.Water"},{value:s.KP.Wind,name:"enums.dragonNature.Wind"},{value:s.KP.Earth,name:"enums.dragonNature.Earth"}]}ngOnInit(){this.user=this.repositoryService.getUserData(),this.getDragonTamerActions(),this.getOwnedDragons()}getDragonTamerActions(){this.actionsLoading$.next(!0),this.actions$=this.dragonController.getTamerActions().pipe((0,u.b)(()=>this.actionsLoading$.next(!1)))}getOwnedDragons(){this.dragonsLoading$.next(!0),this.dragons$=this.dragonController.getOwned().pipe((0,u.b)(()=>this.dragonsLoading$.next(!1)))}performAction(n,t){if(this.user=this.repositoryService.getUserData(),this.user&&this.user.gold<n.baseCost+t.level*n.costFactor)this.toastService.showError("errors.error","errors.insufficientsFound");else if(t.level<n.requiredLevel)this.toastService.showError("errors.error","errors.dragonTooYoung");else switch(n.uid){case"tamer-action-1":this.renameDragon(t);break;case"tamer-action-2":this.resetDragonSkills(t);break;case"tamer-action-3":this.restoreDragonStamina(t);break;case"tamer-action-4":this.changeDragonNature(t);break;case"tamer-action-6":this.ascentDragonPower(t);break;default:this.toastService.showError("errors.error","errors.actionNotFound")}}renameDragon(n){const t=this.nameInput.nativeElement.value;if(!this.validatorService.checkBannedWords(t))return;if(t.length<g.EN||t.length>g.Eh)return void this.toastService.showError("errors.error","errors.dragonNameIncorrectLength",null,{min:g.EN,max:g.Eh});const o={dragonId:n.id,newName:t};this.dragonsLoading$.next(!0),this.actionController.renameDragon(o).subscribe(a=>{this.toastService.showSuccess("common.success","dragonTamer.dragonRenamed"),this.getOwnedDragons(),this.engineService.tick(),this.nameInput.nativeElement.value=null},()=>this.dragonsLoading$.next(!1))}resetDragonSkills(n){this.dragonsLoading$.next(!0),this.actionController.resetDragonSkills(n.id.toString()).subscribe(t=>{this.toastService.showSuccess("common.success","dragonTamer.skillsReseted"),this.getOwnedDragons(),this.engineService.tick()},()=>this.dragonsLoading$.next(!1))}restoreDragonStamina(n){this.dragonsLoading$.next(!0),this.actionController.restoreDragonStamina(n.id.toString()).subscribe(t=>{this.toastService.showSuccess("common.success","dragonTamer.staminaRestored"),this.getOwnedDragons(),this.engineService.tick()},()=>this.dragonsLoading$.next(!1))}changeDragonNature(n){const t=this.newNatureSelect.nativeElement.value;if(!t)return;if(t===n.nature)return void this.toastService.showError("errors.error","errors.dragonAlreadyHasThisNature");const o={dragonId:n.id,newNature:t};this.dragonsLoading$.next(!0),this.actionController.changeDragonNature(o).subscribe(a=>{this.toastService.showSuccess("common.success","dragonTamer.natureChanged"),this.getOwnedDragons(),this.engineService.tick()},()=>this.dragonsLoading$.next(!1))}ascentDragonPower(n){n.nature!==s.KP.Power?(this.dragonsLoading$.next(!0),this.actionController.ascentDragonPower(n.id.toString()).subscribe(t=>{this.toastService.showSuccess("common.success","dragonTamer.ascentDragonPowerSuccess"),this.getOwnedDragons(),this.engineService.tick()},()=>this.dragonsLoading$.next(!1))):this.toastService.showError("errors.error","errors.dragonAlreadyHasThisNature")}performActionWithoutDragon(n){"tamer-action-5"===n.uid?this.extendDragonLimit(n):this.toastService.showError("errors.error","errors.actionNotFound")}extendDragonLimit(n){this.user=this.repositoryService.getUserData(),this.user&&this.user.gold<n.baseCost?this.toastService.showError("errors.error","errors.insufficientsFound"):(this.dragonsLoading$.next(!0),this.actionController.extendDragonLimit().subscribe(o=>{this.toastService.showSuccess("common.success","dragonTamer.dragonLimitExtended"),this.engineService.tick(),this.getDragonTamerActions(),this.getOwnedDragons(),this.user&&this.user.maxOwnedDragons++},()=>this.dragonsLoading$.next(!1)))}}E.\u0275fac=function(n){return new(n||E)(e.Y36(s.iQ),e.Y36(s.GE),e.Y36(x.k),e.Y36(ae.o),e.Y36(A.S),e.Y36(re.b))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-dragon-tamer"]],viewQuery:function(n,t){if(1&n&&(e.Gf(mt,5),e.Gf(ut,5)),2&n){let o;e.iGM(o=e.CRH())&&(t.nameInput=o.first),e.iGM(o=e.CRH())&&(t.newNatureSelect=o.first)}},decls:14,vars:15,consts:[[1,"wrapper-main"],["currentLocation","dragon-tamer"],[1,"wrapper-content"],[1,"wrapper-actions-section"],[1,"wrapper-lore"],[1,"wrapper-lore-img"],["src","assets/img/lore/dragon-tamer.png","draggable","false","alt","Dragon tamer"],["style","margin: 30px auto;",4,"ngIf"],["class","wrapper-actions",4,"ngIf"],[2,"margin","30px auto"],[1,"wrapper-actions"],["class","item-action",4,"ngFor","ngForOf"],[1,"item-action"],[1,"action-hint"],[1,"input-select",2,"margin-top","8px",3,"hidden","change"],["dragonSelect",""],["value",""],["class","input-select-option",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","cost-hint",4,"ngIf"],["class","cost-hint","style","margin-top: 8px;",4,"ngIf"],["class","btn-base btn-action",3,"disabled","click",4,"ngIf"],[1,"input-select-option",3,"value"],[1,"label"],[1,"input-text",3,"placeholder"],["nameInput",""],[1,"input-select"],["newNatureSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"cost-hint"],[3,"class",4,"ngFor","ngForOf"],[1,"cost-hint",2,"margin-top","8px"],[1,"btn-base","btn-action",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,_t,2,0,"div",7),e.ALo(10,"async"),e.YNc(11,Ot,2,1,"div",8),e.ALo(12,"async"),e.ALo(13,"async"),e.qZA()()()),2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,3,"dragonTamer.dragonTamerHint")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,5,t.actionsLoading$)),e.xp6(2),e.Q6J("ngIf",e.kEZ(11,Pt,t.user,e.lcZ(12,7,t.actions$),e.lcZ(13,9,t.dragons$))))},dependencies:[c.sg,c.O5,l.YN,l.Kr,f.g,v.Q,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-actions-section[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #000;background-color:#0000000d;margin:0 10px 10px;max-width:900px;padding:10px}.wrapper-lore[_ngcontent-%COMP%]{margin-bottom:5px;display:flex;text-align:left;gap:10px}.wrapper-lore-img[_ngcontent-%COMP%]{min-width:125px;width:125px}.wrapper-lore-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.item-action[_ngcontent-%COMP%]{margin-top:10px;padding:10px;text-align:left;background-color:#242936}.btn-action[_ngcontent-%COMP%]{width:240px;height:22px;margin:10px 0;line-height:22px}@media screen and (max-width: 990px){.wrapper-lore[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:justify}}"],changeDetection:0});class P{constructor(){this.BASE_IMG_PATH="assets/img/expeditions"}toDisplayExpedition(n){return{...n,image:`${this.BASE_IMG_PATH}/${n.uid}.png`}}}P.\u0275fac=function(n){return new(n||P)},P.\u0275prov=e.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});const Ut=["selectDragon"];function Lt(i,n){1&i&&(e.TgZ(0,"div",9),e._UZ(1,"app-loading-indicator"),e.qZA())}function Gt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15)(4,"b"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e._UZ(10,"br"),e.TgZ(11,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.prepareExpedition(r))}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.prepareGuardianChallenge(r))}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(3),e.Oqu(e.lcZ(6,6,t.name)),e.xp6(3),e.hij(" ",e.lcZ(9,8,t.hint)," "),e.xp6(4),e.hij(" ",e.lcZ(13,10,"explore.explore")," "),e.xp6(3),e.hij(" ",e.lcZ(16,12,"explore.challengeGuardian")," ")}}function It(i,n){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,Gt,17,14,"div",11),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function kt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"div",15)(4,"b"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e._UZ(10,"br"),e.TgZ(11,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.prepareExpedition(r))}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.prepareGuardianChallenge(r))}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(3),e.Oqu(e.lcZ(6,6,t.name)),e.xp6(3),e.hij(" ",e.lcZ(9,8,t.hint)," "),e.xp6(4),e.hij(" ",e.lcZ(13,10,"explore.explore")," "),e.xp6(3),e.hij(" ",e.lcZ(16,12,"explore.challengeGuardian")," ")}}function qt(i,n){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,kt,17,14,"div",11),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function Nt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-dragon-choice-modal",17),e.NdJ("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showDragonChoiceModal=!1)})("dragonSelected",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.dragonChoiceCallback(a,r.selectedExpedition))}),e.qZA()}if(2&i){const t=e.oxw(),o=e.MAs(14);e.Q6J("title",t.modalTitle)("message",t.modalMessage)("dragonTemplate",o)}}function Ft(i,n){1&i&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" (",e.lcZ(2,1,"explore.fullAccess"),") "))}function St(i,n){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA(),e.TgZ(2,"div",19),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ft,3,3,"div",20)),2&i){const t=n.$implicit,o=e.oxw();e.xp6(1),e.AsE(" ",t.name," [",t.level,"] "),e.xp6(2),e.AsE(" ",t.stamina," ",e.lcZ(4,5,"dragon.stamina")," "),e.xp6(2),e.Q6J("ngIf",t.unlockedExpeditions.includes(null==o.selectedExpedition?null:o.selectedExpedition.uid))}}function $t(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-dragon-battle",21),e.NdJ("updatedDragon",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayBattle=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ownedDragon",t.selectedDragon)("expedition",t.selectedExpedition)}}class D{constructor(n,t,o,a,r,p){this.translateService=n,this.actionController=t,this.dragonActionController=o,this.dateService=a,this.toastService=r,this.expeditionService=p,this.showDragonChoiceModal=!1,this.requiredLevel=0,this.displayBattle=!1}ngOnInit(){this.getExpeditions(),this.dragonChoiceCallback=this.startExpedition.bind(this)}getExpeditions(){this.expeditions$=this.dragonActionController.getExpeditions().pipe((0,_.U)(n=>n.data.map(t=>this.expeditionService.toDisplayExpedition(t)))),this.expeditionsEvent$=this.dragonActionController.getExpeditionsEvent().pipe((0,_.U)(n=>n.data.map(t=>this.expeditionService.toDisplayExpedition(t))))}prepareExpedition(n){const t={location:this.translateService.instant(n.name)};this.modalTitle=this.translateService.instant("explore.startExpeditionOf",t),this.modalMessage=this.translateService.instant("explore.startExpeditionHint",{level:n.level}),this.dragonChoiceCallback=this.startExpedition.bind(this),this.selectedExpedition=n,this.showDragonChoiceModal=!0,this.requiredLevel=n.level}prepareGuardianChallenge(n){const t={location:this.translateService.instant(n.name)};this.modalTitle=this.translateService.instant("explore.battleGuardianTitle",t),this.modalMessage=this.translateService.instant("explore.battleGuardianHint",{guardianName:n.guardian.name,level:n.guardian.level}),this.dragonChoiceCallback=this.battleGuardian.bind(this),this.selectedExpedition=n,this.showDragonChoiceModal=!0,this.requiredLevel=n.guardian.level}startExpedition(n,t){this.dateService.checkIfEventAvailable(n.action.nextAction)?(this.showDragonChoiceModal=!1,this.actionController.startExpedition({dragonId:n.id,expeditionUid:t.uid}).subscribe(()=>{this.toastService.showSuccess("explore.expeditionStarted","explore.expeditionStartedHint")})):this.toastService.showError("errors.error","errors.dragonBusy")}battleGuardian(n,t){this.dateService.checkIfEventAvailable(n.action.nextAction)?(this.selectedDragon=n,this.showDragonChoiceModal=!1,this.displayBattle=!0):this.toastService.showError("errors.error","errors.dragonBusy")}}D.\u0275fac=function(n){return new(n||D)(e.Y36(m.sK),e.Y36(s.iQ),e.Y36(s.u8),e.Y36(de.R),e.Y36(x.k),e.Y36(P))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-expeditions"]],viewQuery:function(n,t){if(1&n&&e.Gf(Ut,5),2&n){let o;e.iGM(o=e.CRH())&&(t.selectDragon=o.first)}},decls:16,vars:13,consts:[[1,"wrapper-main"],["currentLocation","expeditions"],[1,"wrapper-content"],[1,"title"],["expeditionsLoading",""],["class","wrapper-expeditions",4,"ngIf","ngIfElse"],[3,"title","message","dragonTemplate","close","dragonSelected",4,"ngIf"],["dragonTemplate",""],[3,"ownedDragon","expedition","updatedDragon",4,"ngIf"],[2,"margin-top","50px"],[1,"wrapper-expeditions"],["class","expedition",4,"ngFor","ngForOf"],[1,"expedition"],[1,"expedition-img"],["draggable","false",3,"src","alt"],[1,"expedition-hint"],[1,"btn-base",3,"click"],[3,"title","message","dragonTemplate","close","dragonSelected"],[2,"margin-bottom","-3px"],[1,"inline","label-small"],["class","inline label-small",4,"ngIf"],[3,"ownedDragon","expedition","updatedDragon"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Lt,2,0,"ng-template",null,4,e.W1O),e.YNc(8,It,2,1,"div",5),e.ALo(9,"async"),e.YNc(10,qt,2,1,"div",5),e.ALo(11,"async"),e.qZA(),e.YNc(12,Nt,1,3,"app-dragon-choice-modal",6),e.YNc(13,St,6,7,"ng-template",null,7,e.W1O),e.YNc(15,$t,1,2,"app-dragon-battle",8),e.qZA()),2&n){const o=e.MAs(7);e.xp6(4),e.Oqu(e.lcZ(5,7,"explore.explorePageTitle")),e.xp6(4),e.Q6J("ngIf",e.lcZ(9,9,t.expeditionsEvent$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,11,t.expeditions$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",t.showDragonChoiceModal&&t.selectedExpedition),e.xp6(3),e.Q6J("ngIf",t.selectedExpedition&&t.displayBattle)}},dependencies:[c.sg,c.O5,f.g,v.Q,ge.q,me._,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-expeditions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.expedition[_ngcontent-%COMP%]{width:95%;max-width:828px;margin:10px auto;display:grid;gap:0px 8px;grid-template-columns:repeat(auto-fit,minmax(200px,400px));box-shadow:inset 1px 1px 24px 12px #242936;justify-content:center;text-align:center;padding:8px}.expedition-img[_ngcontent-%COMP%]{width:100%;max-width:200px;max-height:200px;margin:auto;box-shadow:inset 1px 1px 24px 12px #242936}.expedition-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.expedition-hint[_ngcontent-%COMP%]{min-width:100px;max-width:400px;padding:8px;text-align:justify;letter-spacing:.5px}.expedition-hint[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{letter-spacing:1.5px}.btn-base[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:12px 0 0;height:22px;line-height:20px}"],changeDetection:0});var he=d(5173),le=d(4596);function Jt(i,n){1&i&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"guild.editRole")))}function Et(i,n){1&i&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"guild.addNewRole")))}function Dt(i,n){1&i&&e._UZ(0,"app-input-base",8),2&i&&e.Q6J("options",n.$implicit)}function Qt(i,n){if(1&i&&(e.TgZ(0,"button",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.Q6J("disabled",!t.addRoleForm.valid),e.xp6(1),e.hij(" ",e.lcZ(2,2,"common.confirm")," ")}}function Yt(i,n){if(1&i&&(e.TgZ(0,"div",10)(1,"app-loading-indicator"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,t.createGuildRole$)," ")}}class Q{constructor(n,t,o){this.guildController=n,this.translateService=t,this.toastService=o,this.newRole=new e.vpe,this.close=new e.vpe,this.addRoleForm=new l.cw({name:new l.NI(null,[l.kI.required,l.kI.minLength(g.Ud),l.kI.maxLength(g.HW)]),priority:new l.NI(null,[l.kI.required,l.kI.min(g.rE),l.kI.max(g.kA)]),canAddMembers:new l.NI(!1),canRemoveMembers:new l.NI(!1),canConstruct:new l.NI(!1)}),this.addRoleFormFields=[{form:this.addRoleForm,key:"name",label:"guild.name",type:"text"},{form:this.addRoleForm,key:"priority",label:"guild.priority",type:"number"},{form:this.addRoleForm,key:"canAddMembers",label:"guild.canAddMembers",fieldType:le.f.CHECKBOX},{form:this.addRoleForm,key:"canRemoveMembers",label:"guild.canRemoveMembers",fieldType:le.f.CHECKBOX},{form:this.addRoleForm,key:"canConstruct",label:"guild.canConstruct",fieldType:le.f.CHECKBOX}],this.createGuildRole$=new h.y,this.createGuildRoleLoading$=new b.X(!1),this.addRoleFormFields[1].hint=this.translateService.instant("guild.priorityHint")}ngOnInit(){this.guildRole&&this.addRoleForm.patchValue({name:this.guildRole.name,priority:this.guildRole.priority,canAddMembers:this.guildRole.canAddMembers,canRemoveMembers:this.guildRole.canRemoveMembers,canConstruct:this.guildRole.canConstruct})}onSubmit(){if(!this.addRoleForm.valid)return;const n={name:this.addRoleForm.value.name,priority:this.addRoleForm.value.priority,canAddMembers:this.addRoleForm.value.canAddMembers,canRemoveMembers:this.addRoleForm.value.canRemoveMembers,canConstruct:this.addRoleForm.value.canConstruct};this.guildRole?this.updateGuildRole(n):this.createGuildRole(n)}createGuildRole(n){this.createGuildRoleLoading$.next(!0),this.createGuildRole$=this.guildController.createGuildRole(n).pipe((0,u.b)(t=>{t&&(this.toastService.showSuccess("common.success","guild.roleCreated"),this.addRoleForm.reset(),this.newRole.next(t)),this.createGuildRoleLoading$.next(!1)}),(0,Z.K)(t=>{throw this.createGuildRoleLoading$?.next(!1),t}))}updateGuildRole(n){this.createGuildRoleLoading$.next(!0),this.createGuildRole$=this.guildController.updateGuildRole({id:this.guildRole.id,...n}).pipe((0,u.b)(t=>{t&&(this.toastService.showSuccess("common.success","guild.roleUpdated"),this.addRoleForm.reset(),this.newRole.next(t)),this.createGuildRoleLoading$.next(!1)}),(0,Z.K)(t=>{throw this.createGuildRoleLoading$?.next(!1),t}))}onClose(){console.log(this.guildRole),this.close.next(!0)}}Q.\u0275fac=function(n){return new(n||Q)(e.Y36(s.oZ),e.Y36(m.sK),e.Y36(x.k))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-add-edit-role"]],inputs:{guildRole:"guildRole"},outputs:{newRole:"newRole",close:"close"},decls:14,vars:16,consts:[[1,"wrapper-modal"],[1,"wrapper-modal-conent"],[4,"ngIf"],[1,"wrapper-form",3,"formGroup","ngSubmit"],[3,"options",4,"ngFor","ngForOf"],["class","btn-base",3,"disabled",4,"ngIf"],["style","margin-top: 15px;",4,"ngIf"],[1,"btn-base",3,"disabled","click"],[3,"options"],[1,"btn-base",3,"disabled"],[2,"margin-top","15px"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Jt,3,3,"h2",2),e.YNc(3,Et,3,3,"h2",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.YNc(5,Dt,1,1,"app-input-base",4),e.YNc(6,Qt,3,4,"button",5),e.ALo(7,"async"),e.YNc(8,Yt,4,3,"div",6),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return t.onClose()}),e.ALo(11,"async"),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("ngIf",t.guildRole),e.xp6(1),e.Q6J("ngIf",!t.guildRole),e.xp6(1),e.Q6J("formGroup",t.addRoleForm),e.xp6(1),e.Q6J("ngForOf",t.addRoleFormFields),e.xp6(1),e.Q6J("ngIf",!e.lcZ(7,8,t.createGuildRoleLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,10,t.createGuildRoleLoading$)),e.xp6(2),e.Q6J("disabled",e.lcZ(11,12,t.createGuildRoleLoading$)),e.xp6(2),e.hij(" ",e.lcZ(13,14,"common.close")," "))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.sg,v.Q,se.r,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-modal[_ngcontent-%COMP%]{width:100vw;min-height:100vh;z-index:100;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(36,41,54,.96)}.wrapper-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;max-width:800px;margin:12px auto;text-align:center;font-size:18px}.wrapper-modal[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{margin:20px auto}.wrapper-modal-conent[_ngcontent-%COMP%]{width:clamp(240px,100%,400px);padding:40px 0;border-radius:4px;background:#384055}.wrapper-form[_ngcontent-%COMP%]{margin:30px auto;width:clamp(240px,100%,400px)}"]});const Rt=["roleSelect"];function Kt(i,n){if(1&i&&(e.TgZ(0,"option",10),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.AsE(" [",t.priority,"] ",t.name," ")}}function Ht(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",7,8),e.YNc(6,Kt,2,3,"option",9),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onManage())}),e.ALo(8,"async"),e._uU(9),e.ALo(10,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"guild.role")),e.xp6(4),e.Q6J("ngForOf",t.sortRoles(t.roles)),e.xp6(1),e.Q6J("disabled",e.lcZ(8,6,t.manageMemberLoading$)),e.xp6(2),e.hij(" ",e.lcZ(10,8,"common.confirm")," ")}}function jt(i,n){1&i&&e._UZ(0,"div",11)}class U{constructor(n,t){this.guildController=n,this.toastService=t,this.canUpdatePermission=!0,this.manageSelf=!1,this.managedMember=new e.vpe,this.kickedMember=new e.vpe,this.guildLeft=new e.vpe,this.close=new e.vpe,this.manageMember$=new h.y,this.manageMemberLoading$=new b.X(!1)}sortRoles(n){return n.sort((t,o)=>o.priority-t.priority)}onManage(){this.manageMemberLoading$.next(!0),this.manageMember$=this.guildController.updateGuildMemberRole({memberId:this.member.id,roleId:+this.roleSelect.nativeElement.value}).pipe((0,u.b)(n=>{this.toastService.showSuccess("common.success","guild.roleUpdated"),this.manageMemberLoading$.next(!1),this.managedMember.next(n)}),(0,Z.K)(n=>{throw this.manageMemberLoading$.next(!1),n}))}onKickOrLeave(){this.manageSelf?this.onLeave():this.onKick()}onKick(){this.manageMemberLoading$.next(!0),this.manageMember$=this.guildController.deleteMember(this.member.id).pipe((0,u.b)(n=>{this.toastService.showSuccess("common.success","guild.memberKicked"),this.manageMemberLoading$.next(!1),this.kickedMember.next(n)}),(0,Z.K)(n=>{throw this.manageMemberLoading$.next(!1),n}))}onLeave(){this.manageMemberLoading$.next(!0),this.manageMember$=this.guildController.leaveGuild().pipe((0,u.b)(()=>{this.toastService.showSuccess("common.success","guild.guildLeft"),this.manageMemberLoading$.next(!1),this.guildLeft.next(!0)}),(0,Z.K)(n=>{throw this.manageMemberLoading$.next(!1),n}))}onClose(){this.close.next(!1)}}function Bt(i,n){1&i&&e._UZ(0,"div",7)}U.\u0275fac=function(n){return new(n||U)(e.Y36(s.oZ),e.Y36(x.k))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-manage-member"]],viewQuery:function(n,t){if(1&n&&e.Gf(Rt,5),2&n){let o;e.iGM(o=e.CRH())&&(t.roleSelect=o.first)}},inputs:{member:"member",roles:"roles",canUpdatePermission:"canUpdatePermission",manageSelf:"manageSelf"},outputs:{managedMember:"managedMember",kickedMember:"kickedMember",guildLeft:"guildLeft",close:"close"},decls:16,vars:20,consts:[[1,"wrapper-modal"],[1,"wrapper-modal-conent"],["class","wrapper-form",4,"ngIf"],[1,"btn-base",3,"disabled","click"],["class","gone",4,"ngIf"],[1,"wrapper-form"],[1,"input-label",2,"margin","auto"],[1,"input-select"],["roleSelect",""],["class","input-select-option",3,"value",4,"ngFor","ngForOf"],[1,"input-select-option",3,"value"],[1,"gone"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ht,11,10,"div",2),e.TgZ(6,"button",3),e.NdJ("click",function(){return t.onKickOrLeave()}),e.ALo(7,"async"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return t.onClose()}),e.ALo(11,"async"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,jt,1,0,"div",4),e.ALo(15,"async"),e.qZA()()),2&n&&(e.xp6(3),e.AsE("",e.lcZ(4,8,"guild.manage")," ",t.member.user.nickname,""),e.xp6(2),e.Q6J("ngIf",t.canUpdatePermission),e.xp6(1),e.Q6J("disabled",e.lcZ(7,10,t.manageMemberLoading$)),e.xp6(2),e.hij(" ",e.lcZ(9,12,t.manageSelf?"guild.leaveGuild":"guild.kickOut")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(11,14,t.manageMemberLoading$)),e.xp6(2),e.hij(" ",e.lcZ(13,16,"common.close")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(15,18,t.manageMember$)))},dependencies:[c.sg,c.O5,l.YN,l.Kr,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-modal[_ngcontent-%COMP%]{width:100vw;min-height:100vh;z-index:100;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(36,41,54,.96)}.wrapper-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;max-width:800px;margin:12px auto;text-align:center;font-size:18px}.wrapper-modal[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{margin:20px auto}.wrapper-modal-conent[_ngcontent-%COMP%]{width:clamp(240px,100%,400px);padding:40px 0;border-radius:4px;background:#384055}.wrapper-form[_ngcontent-%COMP%]{margin:30px auto;width:clamp(240px,100%,400px)}.wrapper-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 auto!important}"]});class Y{constructor(n,t){this.guildController=n,this.toastService=t,this.guildDeleted=new e.vpe,this.close=new e.vpe,this.confirmDeleteInput="",this.manageGuild$=new h.y,this.manageGuildLoading$=new b.X(!1)}onDeleteGuild(){this.confirmDeleteInput===this.guildName&&(this.manageGuildLoading$.next(!0),this.manageGuild$=this.guildController.deleteGuild().pipe((0,u.b)(()=>{this.manageGuildLoading$.next(!1),this.toastService.showSuccess("common.success","guild.guildDeleted"),this.guildDeleted.next(!0)}),(0,Z.K)(n=>{throw this.manageGuildLoading$.next(!1),n})))}onClose(){this.close.next(!0)}}function Wt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"a",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.showUserDetails(r.user.id))}),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"img",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.manageGuildMember(r))}),e.qZA()()}if(2&i){const t=n.$implicit,o=n.index;e.xp6(2),e.AsE("",o+2,". ",t.user.nickname,""),e.xp6(2),e.Oqu(t.role&&t.role.name?t.role.name:e.lcZ(5,3,"guild.member"))}}function Xt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",12)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",13)(9,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showUserDetails(a.guild.founder.id))}),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"img",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayManageGuild=!0)}),e.qZA()(),e.YNc(15,Wt,7,5,"div",16),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,5,"guild.member")," "),e.xp6(3),e.Oqu(e.lcZ(7,7,"guild.role")),e.xp6(4),e.hij("1. ",t.guild.founder.nickname,""),e.xp6(2),e.Oqu(e.lcZ(13,9,"guild.founder")),e.xp6(3),e.Q6J("ngForOf",t.sortMembers(t.guild.members))}}function zt(i,n){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"guild.canAddMembers")," "))}function Vt(i,n){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"guild.canRemoveMembers")," "))}function en(i,n){1&i&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"guild.canConstruct")," "))}function tn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"img",29)(4,"img",29)(5,"img",29),e.TgZ(6,"img",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.editRole(r))}),e.qZA()()}if(2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(2),e.AsE("[",t.priority,"] ",t.name,""),e.xp6(1),e.Q6J("src",o.parseRolePermission(t.canAddMembers),e.LSH),e.xp6(1),e.Q6J("src",o.parseRolePermission(t.canRemoveMembers),e.LSH),e.xp6(1),e.Q6J("src",o.parseRolePermission(t.canConstruct),e.LSH)}}function nn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",20),e.YNc(6,zt,3,3,"ng-template",null,21,e.W1O),e._UZ(8,"img",22),e.qZA(),e.TgZ(9,"div",20),e.YNc(10,Vt,3,3,"ng-template",null,21,e.W1O),e._UZ(12,"img",23),e.qZA(),e.TgZ(13,"div",20),e.YNc(14,en,3,3,"ng-template",null,21,e.W1O),e._UZ(16,"img",24),e.qZA()(),e.YNc(17,tn,7,5,"div",25),e.TgZ(18,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayGuildRoleForm=!0)}),e._uU(19),e.ALo(20,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"guild.name")),e.xp6(14),e.Q6J("ngForOf",t.sortRoles(t.guild.roles)),e.xp6(2),e.hij(" ",e.lcZ(20,5,"guild.addNewRole")," ")}}function on(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"a",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.showUserDetails(r.user.id))}),e._uU(2),e.qZA(),e.TgZ(3,"div",35)(4,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.processApplication(r.id,!0))}),e.ALo(5,"async"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.processApplication(r.id,!1))}),e.ALo(9,"async"),e._uU(10),e.ALo(11,"translate"),e.qZA()()()}if(2&i){const t=n.$implicit,o=e.oxw(3);e.xp6(2),e.Oqu(t.user.nickname),e.xp6(2),e.Q6J("disabled",e.lcZ(5,5,o.processApplicationLoading$)),e.xp6(2),e.hij(" ",e.lcZ(7,7,"guild.accept")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(9,9,o.processApplicationLoading$)),e.xp6(2),e.hij(" ",e.lcZ(11,11,"guild.reject")," ")}}function an(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,on,12,13,"div",33),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function rn(i,n){if(1&i&&(e.TgZ(0,"div",30)(1,"h2",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,an,2,1,"div",32),e.ALo(5,"async"),e.qZA()),2&i){const t=e.oxw();let o;e.xp6(2),e.hij(" ",e.lcZ(3,2,"guild.pendingApplications")," "),e.xp6(2),e.Q6J("ngIf",null==(o=e.lcZ(5,4,t.guildApplications$))?null:o.data)}}function sn(i,n){1&i&&e._UZ(0,"div",37)}function cn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-manage-member",38),e.NdJ("managedMember",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onManageMember(a))})("kickedMember",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onKickMember(a))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayManageGuildMember=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("member",t.managedGuildMember)("roles",t.guild.roles)}}function ln(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-edit-role",39),e.NdJ("newRole",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onAddEditRole(a))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onAddEditRoleClose())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("guildRole",t.editedGuildRole)}}function pn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-manage-guild",40),e.NdJ("guildDeleted",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.guildDeleted.next(!0))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayManageGuild=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("guildName",t.guild.name)}}Y.\u0275fac=function(n){return new(n||Y)(e.Y36(s.oZ),e.Y36(x.k))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-manage-guild"]],inputs:{guildName:"guildName"},outputs:{guildDeleted:"guildDeleted",close:"close"},decls:20,vars:23,consts:[[1,"wrapper-modal"],[1,"wrapper-modal-conent"],[1,"wrapper-form"],[1,"input-label",2,"margin","auto"],["type","text",1,"input",3,"ngModel","ngModelChange"],[1,"btn-base",3,"disabled","click"],["class","gone",4,"ngIf"],[1,"gone"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"div",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"input",4),e.NdJ("ngModelChange",function(a){return t.confirmDeleteInput=a}),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){return t.onDeleteGuild()}),e.ALo(11,"async"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"button",5),e.NdJ("click",function(){return t.onClose()}),e.ALo(15,"async"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,Bt,1,0,"div",6),e.ALo(19,"async"),e.qZA()()),2&n&&(e.xp6(3),e.AsE("",e.lcZ(4,9,"guild.manage")," ",t.guildName,""),e.xp6(4),e.Oqu(e.lcZ(8,11,"guild.deleteHint")),e.xp6(2),e.Q6J("ngModel",t.confirmDeleteInput),e.xp6(1),e.Q6J("disabled",e.lcZ(11,13,t.manageGuildLoading$)),e.xp6(2),e.hij(" ",e.lcZ(13,15,"common.confirm")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(15,17,t.manageGuildLoading$)),e.xp6(2),e.hij(" ",e.lcZ(17,19,"common.close")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,21,t.manageGuild$)))},dependencies:[c.O5,l.Fj,l.JJ,l.On,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-modal[_ngcontent-%COMP%]{width:100vw;min-height:100vh;z-index:100;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(36,41,54,.96)}.wrapper-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;max-width:800px;margin:12px auto;text-align:center;font-size:18px}.wrapper-modal[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{margin:20px auto}.wrapper-modal-conent[_ngcontent-%COMP%]{width:clamp(240px,100%,400px);padding:40px 0;border-radius:4px;background:#384055}.wrapper-form[_ngcontent-%COMP%]{margin:30px auto;width:clamp(240px,100%,400px)}.wrapper-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px auto!important}.input[_ngcontent-%COMP%]{max-width:240px;margin:0 auto}"]});class R{constructor(n,t,o,a){this.router=n,this.toastService=t,this.actionGuildController=o,this.guildController=a,this.guildDeleted=new e.vpe,this.GuildView=K,this.viewMode=K.Members,this.displayManageGuildMember=!1,this.manageGuild=!1,this.displayGuildRoleForm=!1,this.processApplication$=new h.y,this.processApplicationLoading$=new b.X(!1),this.displayManageGuild=!1,this.getAppliations()}showUserDetails(n){this.router.navigate(["game","profile",n])}manageGuildMember(n){this.managedGuildMember=n,this.displayManageGuildMember=!0}manageGuildFounder(){this.manageGuild=!0,this.displayManageGuildMember=!0}onManageMember(n){this.displayManageGuildMember=!1,this.guild.members=this.guild.members.map(t=>t.id===n.id?n:t)}onKickMember(n){this.displayManageGuildMember=!1,this.guild.members=this.guild.members.filter(t=>t.id!==n.id)}getAppliations(){this.guildApplications$=this.guildController.getApplications()}processApplication(n,t){this.processApplicationLoading$.next(!0),this.processApplication$=this.actionGuildController.processApplication({applicationId:n,accept:t}).pipe((0,u.b)(o=>{this.processApplicationLoading$.next(!1),this.toastService.showSuccess("common.success",t?"guild.applicationAccepted":"guild.applicationRejected"),this.getAppliations(),t&&o&&this.guild.members.push(o)}),(0,Z.K)(o=>{throw this.processApplicationLoading$.next(!1),o}))}sortRoles(n){return n.sort((t,o)=>o.priority-t.priority)}sortMembers(n){return n.sort((t,o)=>(o.role?.priority||0)-(t.role?.priority||0))}parseRolePermission(n){return n?"assets/img/icons/allowed.svg":"assets/img/icons/disallowed.svg"}editRole(n){this.editedGuildRole=n,console.log(this.editedGuildRole),this.displayGuildRoleForm=!0}onAddEditRoleClose(){this.editedGuildRole=void 0,this.displayGuildRoleForm=!1}onAddEditRole(n){if(this.displayGuildRoleForm=!1,n.id===this.editedGuildRole?.id)return this.guild.roles=this.guild.roles.map(t=>n.id===t.id?n:t),void(this.editedGuildRole=void 0);this.guild.roles=[n,...this.guild.roles]}}R.\u0275fac=function(n){return new(n||R)(e.Y36(C.F0),e.Y36(x.k),e.Y36(s.M9),e.Y36(s.oZ))},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-founder-guild"]],inputs:{guild:"guild"},outputs:{guildDeleted:"guildDeleted"},decls:27,vars:26,consts:[[1,"wrapper-guild"],[1,"wrapper-info"],[1,"wrapper-actions"],[1,"btn-base",3,"click"],["class","wrapper-members",4,"ngIf"],["class","wrapper-roles",4,"ngIf"],["class","wrapper-applications",4,"ngIf"],["class","gone",4,"ngIf"],[3,"member","roles","managedMember","kickedMember","close",4,"ngIf"],[3,"guildRole","newRole","close",4,"ngIf"],[3,"guildName","guildDeleted","close",4,"ngIf"],[1,"wrapper-members"],[1,"item-member-header"],[1,"item-member","member-founder"],[3,"click"],["src","assets/img/icons/edit.svg",1,"icon-permission","icon-edit",3,"click"],["class","item-member",4,"ngFor","ngForOf"],[1,"item-member"],[1,"wrapper-roles"],[1,"item-role-header"],["tooltip","",1,"wrapper-tooltip"],["tooltipTemplate",""],["src","assets/img/icons/user-add.svg",1,"icon-permission"],["src","assets/img/icons/user-remove.svg",1,"icon-permission"],["src","assets/img/icons/construct.svg",1,"icon-permission"],["class","item-role",4,"ngFor","ngForOf"],[1,"btn-base",2,"width","100%","max-width","100%","margin","10px 0",3,"click"],[1,"item-tooltip"],[1,"item-role"],[1,"icon-permission",3,"src"],[1,"wrapper-applications"],[2,"font-weight","500","margin-top","15px"],[4,"ngIf"],["class","item-application",4,"ngFor","ngForOf"],[1,"item-application"],[2,"display","flex","gap","5px"],[1,"btn-base","btn-small",3,"disabled","click"],[1,"gone"],[3,"member","roles","managedMember","kickedMember","close"],[3,"guildRole","newRole","close"],[3,"guildName","guildDeleted","close"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"div",2)(7,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Members}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Roles}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Applications}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Structures}),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.YNc(19,Xt,16,11,"div",4),e.YNc(20,nn,21,7,"div",5),e.YNc(21,rn,6,6,"div",6),e.qZA(),e.YNc(22,sn,1,0,"div",7),e.ALo(23,"async"),e.YNc(24,cn,1,2,"app-manage-member",8),e.YNc(25,ln,1,1,"app-add-edit-role",9),e.YNc(26,pn,1,1,"app-manage-guild",10)),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,14,"guild.guild"),": "),e.xp6(3),e.AsE("",t.guild.name," [",t.guild.tag,"]"),e.xp6(3),e.hij(" ",e.lcZ(9,16,"guild.members")," "),e.xp6(3),e.hij(" ",e.lcZ(12,18,"guild.roles")," "),e.xp6(3),e.hij(" ",e.lcZ(15,20,"guild.applications")," "),e.xp6(3),e.hij(" ",e.lcZ(18,22,"guild.structures")," "),e.xp6(2),e.Q6J("ngIf",t.viewMode===t.GuildView.Members),e.xp6(1),e.Q6J("ngIf",t.viewMode===t.GuildView.Roles),e.xp6(1),e.Q6J("ngIf",t.viewMode===t.GuildView.Applications),e.xp6(1),e.Q6J("ngIf",e.lcZ(23,24,t.processApplication$)),e.xp6(2),e.Q6J("ngIf",t.displayManageGuildMember&&t.managedGuildMember),e.xp6(1),e.Q6J("ngIf",t.displayGuildRoleForm),e.xp6(1),e.Q6J("ngIf",t.displayManageGuild))},dependencies:[c.sg,c.O5,he.i,Q,U,Y,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-guild[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:10px auto;justify-content:space-between;align-items:stretch}.wrapper-info[_ngcontent-%COMP%]{margin:10px 0;padding:10px;font-size:20px;border:1px dashed #242936}.wrapper-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.wrapper-actions[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{height:24px;line-height:24px}.wrapper-members[_ngcontent-%COMP%]{margin:5px auto 10px;display:flex;gap:1px;flex-direction:column;align-items:center}.item-member-header[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 8px 1px #ffeeca;background-color:#ffeeca0d;width:100%;margin-bottom:4px;border-bottom:2px solid #FFEECA;padding:5px;display:grid;grid-template-columns:5fr 5fr 1fr;font-weight:600;text-align:left}.item-member-header[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 8px 1px #ffe6b1;background-color:#ffe6b10d}.item-member[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:grid;grid-template-columns:5fr 5fr 1fr;text-align:left}.item-member[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.item-member[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer}.member-founder[_ngcontent-%COMP%]{font-weight:500;letter-spacing:1px}.wrapper-roles[_ngcontent-%COMP%]{margin:5px auto 10px;display:flex;gap:1px;flex-direction:column;align-items:center}.item-role-header[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 8px 1px #ffeeca;background-color:#ffeeca0d;width:100%;margin-bottom:4px;border-bottom:2px solid #FFEECA;padding:5px;display:grid;grid-template-columns:4fr 1fr 1fr 1fr 1fr;font-weight:600;text-align:left}.item-role-header[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 8px 1px #ffe6b1;background-color:#ffe6b10d}.item-role[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:grid;grid-template-columns:4fr 1fr 1fr 1fr 1fr;text-align:left}.item-role[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.wrapper-tooltip[_ngcontent-%COMP%]{margin-left:auto}.item-tooltip[_ngcontent-%COMP%]{box-shadow:inset 0 0 2px 1px #000}.icon-permission[_ngcontent-%COMP%]{width:20px;margin-top:3px;margin-left:auto}.icon-edit[_ngcontent-%COMP%]{width:16px;margin-top:5px}.icon-edit[_ngcontent-%COMP%]:hover{cursor:pointer}.wrapper-application[_ngcontent-%COMP%]{border:2px solid #FFEECA}.item-application[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:flex;justify-content:space-between;align-items:center;text-align:left}.item-application[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.item-application[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.item-application[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]});var K=(()=>{return(i=K||(K={}))[i.Applications=0]="Applications",i[i.Members=1]="Members",i[i.Roles=2]="Roles",i[i.Structures=3]="Structures",K;var i})();function dn(i,n){1&i&&e._UZ(0,"app-input-base",8),2&i&&e.Q6J("options",n.$implicit)}function gn(i,n){if(1&i&&(e.TgZ(0,"button",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.Q6J("disabled",!t.createGuildForm.valid),e.xp6(1),e.hij(" ",e.lcZ(2,2,"guild.found")," ")}}function mn(i,n){if(1&i&&(e.TgZ(0,"div",10)(1,"app-loading-indicator"),e._uU(2),e.ALo(3,"async"),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,t.createGuild$)," ")}}const un=function(){return{cost:1e4}};class H{constructor(n,t,o,a){this.actionGuildController=n,this.translateService=t,this.toastService=o,this.engineService=a,this.close=new e.vpe,this.guildCreated=new e.vpe,this.GUILD_COST=g.Hf,this.createGuildForm=new l.cw({name:new l.NI(null,[l.kI.required,l.kI.minLength(g.aq),l.kI.maxLength(g.Qr)]),tag:new l.NI(null,[l.kI.required,l.kI.minLength(g.kk),l.kI.maxLength(g.Sf)]),description:new l.NI(null,[l.kI.max(g.LC)])}),this.createGuildFormFields=[{form:this.createGuildForm,key:"name",label:"guild.name",type:"text"},{form:this.createGuildForm,key:"tag",label:"guild.tag",type:"text"},{form:this.createGuildForm,key:"description",label:"guild.description",type:"text"}],this.createGuild$=new h.y,this.createGuildLoading$=new b.X(!1),this.createGuildFormFields[1].hint=this.translateService.instant("guild.tagHint",{min:g.kk,max:g.Sf})}createGuild(){if(!this.createGuildForm.valid)return;const n={name:this.createGuildForm.value.name,tag:this.createGuildForm.value.tag,description:this.createGuildForm.value.description??""};this.createGuildLoading$.next(!0),this.createGuild$=this.actionGuildController.createGuild(n).pipe((0,u.b)(()=>{this.toastService.showSuccess("common.success","guild.guildFounded"),this.engineService.tick(),this.guildCreated.next(!0)}),(0,Z.K)(t=>{throw this.createGuildLoading$?.next(!1),t}))}}function _n(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e._uU(1),e.TgZ(2,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.apply(r.id,r.name))}),e.ALo(3,"async"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const t=n.$implicit,o=e.oxw();e.xp6(1),e.AsE(" [",t.tag,"] ",t.name," "),e.xp6(1),e.Q6J("disabled",e.lcZ(3,4,o.createGuildApplicationLoading$)),e.xp6(2),e.hij(" ",e.lcZ(5,6,"guild.apply")," ")}}function hn(i,n){1&i&&e._UZ(0,"div",9)}function xn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-create-guild",10),e.NdJ("guildCreated",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.guildCreated.next(!0))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayCreateGuild=!1)}),e.qZA()}}H.\u0275fac=function(n){return new(n||H)(e.Y36(s.M9),e.Y36(m.sK),e.Y36(x.k),e.Y36(A.S))},H.\u0275cmp=e.Xpm({type:H,selectors:[["app-create-guild"]],outputs:{close:"close",guildCreated:"guildCreated"},decls:17,vars:19,consts:[[1,"wrapper-modal"],[1,"wrapper-modal-conent"],[1,"title-secondary"],[1,"wrapper-form",3,"formGroup","ngSubmit"],[3,"options",4,"ngFor","ngForOf"],["class","btn-base",3,"disabled",4,"ngIf"],["style","margin-top: 15px;",4,"ngIf"],[1,"btn-base",3,"click"],[3,"options"],[1,"btn-base",3,"disabled"],[2,"margin-top","15px"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"form",3),e.NdJ("ngSubmit",function(){return t.createGuild()}),e.YNc(9,dn,1,1,"app-input-base",4),e.YNc(10,gn,3,4,"button",5),e.ALo(11,"async"),e.YNc(12,mn,4,3,"div",6),e.ALo(13,"async"),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return t.close.next(!0)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,7,"guild.foundHind")," "),e.xp6(3),e.Oqu(e.xi3(7,9,"guild.foundRequirements",e.DdM(18,un))),e.xp6(2),e.Q6J("formGroup",t.createGuildForm),e.xp6(1),e.Q6J("ngForOf",t.createGuildFormFields),e.xp6(1),e.Q6J("ngIf",!e.lcZ(11,12,t.createGuildLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,14,t.createGuildLoading$)),e.xp6(3),e.hij(" ",e.lcZ(16,16,"common.close")," "))},dependencies:[c.sg,c.O5,l._Y,l.JL,l.sg,v.Q,se.r,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-modal[_ngcontent-%COMP%]{width:100vw;min-height:100vh;z-index:100;position:absolute;top:0;left:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:rgba(36,41,54,.96)}.wrapper-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:95%;max-width:800px;margin:12px auto;text-align:center;font-size:18px}.wrapper-modal[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{margin:20px auto}.wrapper-modal-conent[_ngcontent-%COMP%]{width:clamp(240px,100%,400px);padding:40px 0;border-radius:4px;background:#384055}.wrapper-form[_ngcontent-%COMP%]{margin:30px auto;width:clamp(240px,100%,400px)}"]});class j{constructor(n,t){this.actionGuildController=n,this.toastService=t,this.guildCreated=new e.vpe,this.displayCreateGuild=!1,this.createGuildApplication$=new h.y,this.createGuildApplicationLoading$=new b.X(!1)}apply(n,t){this.createGuildApplicationLoading$.next(!0),this.createGuildApplication$=this.actionGuildController.createGuildApplication({guildId:n,message:""}).pipe((0,u.b)(()=>{this.createGuildApplicationLoading$.next(!1),this.toastService.showSuccess("common.success","guild.applicationCreated",{},{guild:t})}),(0,Z.K)(o=>{throw this.createGuildApplicationLoading$.next(!1),o}))}}function fn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"img",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.manageGuildMember(a))}),e.qZA()}}function vn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"a",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.showUserDetails(r.user.id))}),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,fn,1,0,"img",14),e.qZA()}if(2&i){const t=n.$implicit,o=n.index,a=e.oxw(2);e.xp6(2),e.AsE("",o+2,". ",t.user.nickname,""),e.xp6(2),e.Oqu(t.role&&t.role.name?t.role.name:e.lcZ(5,4,"guild.member")),e.xp6(2),e.Q6J("ngIf",a.checkRemoveMembersPermissions(t))}}function bn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",10)(9,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showUserDetails(a.guild.founder.id))}),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,vn,7,6,"div",12),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,5,"guild.member")," "),e.xp6(3),e.Oqu(e.lcZ(7,7,"guild.role")),e.xp6(4),e.hij("1. ",t.guild.founder.nickname,""),e.xp6(2),e.Oqu(e.lcZ(13,9,"guild.founder")),e.xp6(2),e.Q6J("ngForOf",t.sortMembers(t.guild.members))}}function Cn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"a",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.showUserDetails(r.user.id))}),e._uU(2),e.qZA(),e.TgZ(3,"div",21)(4,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.processApplication(r.id,!0))}),e.ALo(5,"async"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.processApplication(r.id,!1))}),e.ALo(9,"async"),e._uU(10),e.ALo(11,"translate"),e.qZA()()()}if(2&i){const t=n.$implicit,o=e.oxw(3);e.xp6(2),e.Oqu(t.user.nickname),e.xp6(2),e.Q6J("disabled",e.lcZ(5,5,o.processApplicationLoading$)),e.xp6(2),e.hij(" ",e.lcZ(7,7,"guild.accept")," "),e.xp6(2),e.Q6J("disabled",e.lcZ(9,9,o.processApplicationLoading$)),e.xp6(2),e.hij(" ",e.lcZ(11,11,"guild.reject")," ")}}function Zn(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Cn,12,13,"div",19),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function wn(i,n){if(1&i&&(e.TgZ(0,"div",16)(1,"h2",17),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Zn,2,1,"div",18),e.ALo(5,"async"),e.qZA()),2&i){const t=e.oxw();let o;e.xp6(2),e.hij(" ",e.lcZ(3,2,"guild.pendingApplications")," "),e.xp6(2),e.Q6J("ngIf",null==(o=e.lcZ(5,4,t.guildApplications$))?null:o.data)}}function Mn(i,n){1&i&&e._UZ(0,"div",23)}function An(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-manage-member",24),e.NdJ("kickedMember",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onKickMember(a))})("guildLeft",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.guildLeft.next(a))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayManageGuildMember=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("member",t.managedGuildMember)("roles",t.guild.roles)("canUpdatePermission",!1)("manageSelf",t.manageSelf)}}j.\u0275fac=function(n){return new(n||j)(e.Y36(s.M9),e.Y36(x.k))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-no-guild"]],inputs:{guilds:"guilds"},outputs:{guildCreated:"guildCreated"},decls:13,vars:11,consts:[[1,"wrapper-guild"],[1,"wrapper-info"],[1,"wrapper-guilds"],["class","wrapper-guild-item",4,"ngFor","ngForOf"],["class","gone",4,"ngIf"],[1,"btn-base",3,"click"],[3,"guildCreated","close",4,"ngIf"],[1,"wrapper-guild-item"],[1,"btn-base","btn-small",3,"disabled","click"],[1,"gone"],[3,"guildCreated","close"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",2),e.YNc(6,_n,6,8,"div",3),e.qZA(),e.YNc(7,hn,1,0,"div",4),e.ALo(8,"async"),e.TgZ(9,"button",5),e.NdJ("click",function(){return t.displayCreateGuild=!0}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.YNc(12,xn,1,0,"app-create-guild",6)),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"guild.noGuildHint")),e.xp6(3),e.Q6J("ngForOf",t.guilds),e.xp6(1),e.Q6J("ngIf",e.lcZ(8,7,t.createGuildApplication$)),e.xp6(3),e.hij(" ",e.lcZ(11,9,"guild.found")," "),e.xp6(2),e.Q6J("ngIf",t.displayCreateGuild))},dependencies:[c.sg,c.O5,H,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-info[_ngcontent-%COMP%]{margin:10px 0;padding:5px;font-size:18px}.wrapper-guilds[_ngcontent-%COMP%]{margin-bottom:25px}.wrapper-guild-item[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:90;max-width:400px;margin:2px auto;padding:5px;display:flex;justify-content:space-between;align-items:center;font-size:16px;letter-spacing:1px}.wrapper-guild-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}"]});class B{constructor(n,t,o,a,r){this.router=n,this.actionGuildController=t,this.guildController=o,this.toastService=a,this.engineService=r,this.guildLeft=new e.vpe,this.GuildView=W,this.viewMode=W.Members,this.processApplication$=new h.y,this.processApplicationLoading$=new b.X(!1),this.manageSelf=!1,this.displayManageGuildMember=!1,this.getAppliations()}sortMembers(n){return n.sort((t,o)=>(o.role?.priority||0)-(t.role?.priority||0))}showUserDetails(n){this.router.navigate(["game","profile",n])}getAppliations(){this.guildApplications$=this.guildController.getApplications()}checkProcessApplicationPermission(){const n=this.engineService.user.id;return this.guild.members.some(t=>t.id=n&&t.role&&t.role.canAddMembers)}processApplication(n,t){this.processApplicationLoading$.next(!0),this.processApplication$=this.actionGuildController.processApplication({applicationId:n,accept:t}).pipe((0,u.b)(o=>{this.processApplicationLoading$.next(!1),this.toastService.showSuccess("common.success",t?"guild.applicationAccepted":"guild.applicationRejected"),this.getAppliations(),t&&o&&this.guild.members.push(o)}),(0,Z.K)(o=>{throw this.processApplicationLoading$.next(!1),o}))}checkRemoveMembersPermissions(n){const t=this.engineService.user.id;return t===n.user.id||this.guild.members.some(o=>o.id=t&&o.role&&o.role.canRemoveMembers)}manageGuildMember(n){this.manageSelf=this.engineService.user.id===n.user.id,this.managedGuildMember=n,this.displayManageGuildMember=!0}onKickMember(n){this.displayManageGuildMember=!1,this.guild.members=this.guild.members.filter(t=>t.id!==n.id)}}B.\u0275fac=function(n){return new(n||B)(e.Y36(C.F0),e.Y36(s.M9),e.Y36(s.oZ),e.Y36(x.k),e.Y36(A.S))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-member-guild"]],inputs:{guild:"guild"},outputs:{guildLeft:"guildLeft"},decls:21,vars:20,consts:[[1,"wrapper-guild"],[1,"wrapper-info"],[1,"wrapper-actions"],[1,"btn-base",3,"click"],["class","wrapper-members",4,"ngIf"],["class","wrapper-applications",4,"ngIf"],["class","gone",4,"ngIf"],[3,"member","roles","canUpdatePermission","manageSelf","kickedMember","guildLeft","close",4,"ngIf"],[1,"wrapper-members"],[1,"item-member-header"],[1,"item-member","member-founder"],[3,"click"],["class","item-member",4,"ngFor","ngForOf"],[1,"item-member"],["src","assets/img/icons/edit.svg","class","icon-permission icon-edit",3,"click",4,"ngIf"],["src","assets/img/icons/edit.svg",1,"icon-permission","icon-edit",3,"click"],[1,"wrapper-applications"],[2,"font-weight","500","margin-top","15px"],[4,"ngIf"],["class","item-application",4,"ngFor","ngForOf"],[1,"item-application"],[2,"display","flex","gap","5px"],[1,"btn-base","btn-small",3,"disabled","click"],[1,"gone"],[3,"member","roles","canUpdatePermission","manageSelf","kickedMember","guildLeft","close"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"div",2)(7,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Members}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Applications}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",3),e.NdJ("click",function(){return t.viewMode=t.GuildView.Structures}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.YNc(16,bn,15,11,"div",4),e.YNc(17,wn,6,6,"div",5),e.qZA(),e.YNc(18,Mn,1,0,"div",6),e.ALo(19,"async"),e.YNc(20,An,1,4,"app-manage-member",7)),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,10,"guild.guild"),": "),e.xp6(3),e.AsE("",t.guild.name," [",t.guild.tag,"]"),e.xp6(3),e.hij(" ",e.lcZ(9,12,"guild.members")," "),e.xp6(3),e.hij(" ",e.lcZ(12,14,"guild.applications")," "),e.xp6(3),e.hij(" ",e.lcZ(15,16,"guild.structures")," "),e.xp6(2),e.Q6J("ngIf",t.viewMode===t.GuildView.Members),e.xp6(1),e.Q6J("ngIf",t.viewMode===t.GuildView.Applications),e.xp6(1),e.Q6J("ngIf",e.lcZ(19,18,t.processApplication$)),e.xp6(2),e.Q6J("ngIf",t.displayManageGuildMember&&t.managedGuildMember))},dependencies:[c.sg,c.O5,U,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-guild[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:10px auto;justify-content:space-between;align-items:stretch}.wrapper-info[_ngcontent-%COMP%]{margin:10px 0;padding:10px;font-size:20px;border:1px dashed #242936}.wrapper-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.wrapper-actions[_ngcontent-%COMP%]   .btn-base[_ngcontent-%COMP%]{height:24px;line-height:24px}.wrapper-members[_ngcontent-%COMP%]{margin:5px auto 10px;display:flex;gap:1px;flex-direction:column;align-items:center}.item-member-header[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 8px 1px #ffeeca;background-color:#ffeeca0d;width:100%;margin-bottom:4px;border-bottom:2px solid #FFEECA;padding:5px;display:grid;grid-template-columns:5fr 5fr 1fr;font-weight:600;text-align:left}.item-member-header[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 8px 1px #ffe6b1;background-color:#ffe6b10d}.item-member[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:grid;grid-template-columns:5fr 5fr 1fr;text-align:left}.item-member[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.item-member[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer}.member-founder[_ngcontent-%COMP%]{font-weight:500;letter-spacing:1px}.wrapper-tooltip[_ngcontent-%COMP%]{margin-left:auto}.item-tooltip[_ngcontent-%COMP%]{box-shadow:inset 0 0 2px 1px #000}.icon-permission[_ngcontent-%COMP%]{width:20px;margin-top:3px;margin-left:auto}.icon-edit[_ngcontent-%COMP%]{width:16px;margin-top:5px}.icon-edit[_ngcontent-%COMP%]:hover{cursor:pointer}.wrapper-application[_ngcontent-%COMP%]{border:2px solid #FFEECA}.item-application[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #242936;background-color:#2429360d;width:100%;padding:5px;display:flex;justify-content:space-between;align-items:center;text-align:left}.item-application[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #101217;background-color:#1012170d}.item-application[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.item-application[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}"]});var W=(()=>{return(i=W||(W={}))[i.Applications=0]="Applications",i[i.Members=1]="Members",i[i.Structures=2]="Structures",W;var i})();function yn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-founder-guild",8),e.NdJ("guildDeleted",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onGuildDeleted())}),e.qZA()}if(2&i){const t=e.oxw().ngIf;e.Q6J("guild",t.founderGuild)}}function Tn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-member-guild",9),e.NdJ("guildLeft",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onGuildLeft())}),e.qZA()}if(2&i){const t=e.oxw().ngIf;e.Q6J("guild",t.memberGuild)}}function On(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-no-guild",10),e.NdJ("guildCreated",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onGuildCreated())}),e.qZA()}if(2&i){const t=e.oxw().ngIf;e.Q6J("guilds",t.guilds.data)}}function Pn(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,yn,1,1,"app-founder-guild",5),e.YNc(2,Tn,1,1,"app-member-guild",6),e.YNc(3,On,1,1,"app-no-guild",7),e.qZA()),2&i){const t=n.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",t.founderGuild&&o.viewMode===o.GuildView.FounderView),e.xp6(1),e.Q6J("ngIf",t.memberGuild&&o.viewMode===o.GuildView.MemberView),e.xp6(1),e.Q6J("ngIf",!t.founderGuild&&!t.memberGuild&&t.guilds&&o.viewMode===o.GuildView.DefaultView)}}function Un(i,n){1&i&&e._UZ(0,"app-loading-indicator")}const Ln=function(i,n,t){return{founderGuild:i,memberGuild:n,guilds:t}};class X{constructor(n){this.guildController=n,this.GuildView=w,this.viewMode=w.DefaultView,this.guildPage=0,this.guildPageLimit=20}ngOnInit(){this.founderGuild$=this.guildController.getFounderGuild().pipe((0,u.b)(n=>{n&&(this.viewMode=w.FounderView)})),this.memberGuild$=this.guildController.getMemberGuild().pipe((0,u.b)(n=>{n&&(this.viewMode=w.MemberView)})),this.guilds$=this.guildController.getAll({page:this.guildPage,limit:this.guildPageLimit})}onGuildDeleted(){this.guilds$=this.guildController.getAll({page:this.guildPage,limit:this.guildPageLimit}),this.founderGuild$=void 0,this.memberGuild$=void 0,this.viewMode=w.DefaultView}onGuildLeft(){this.guilds$=this.guildController.getAll({page:this.guildPage,limit:this.guildPageLimit}),this.founderGuild$=void 0,this.memberGuild$=void 0,this.viewMode=w.DefaultView}onGuildCreated(){this.founderGuild$=this.guildController.getFounderGuild().pipe((0,u.b)(n=>{n&&(this.viewMode=w.FounderView)}))}}X.\u0275fac=function(n){return new(n||X)(e.Y36(s.oZ))},X.\u0275cmp=e.Xpm({type:X,selectors:[["app-guild"]],decls:9,vars:12,consts:[[1,"wrapper-main"],["currentLocation","guild"],[1,"wrapper-content"],[4,"ngIf","ngIfElse"],["loading",""],[3,"guild","guildDeleted",4,"ngIf"],[3,"guild","guildLeft",4,"ngIf"],[3,"guilds","guildCreated",4,"ngIf"],[3,"guild","guildDeleted"],[3,"guild","guildLeft"],[3,"guilds","guildCreated"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2),e.YNc(3,Pn,4,3,"div",3),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.YNc(7,Un,1,0,"ng-template",null,4,e.W1O),e.qZA()()),2&n){const o=e.MAs(8);e.xp6(3),e.Q6J("ngIf",e.kEZ(8,Ln,e.lcZ(4,2,t.founderGuild$),e.lcZ(5,4,t.memberGuild$),e.lcZ(6,6,t.guilds$)))("ngIfElse",o)}},dependencies:[c.O5,f.g,v.Q,R,j,B,c.Ov],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}"],changeDetection:0});var w=(()=>{return(i=w||(w={}))[i.FounderView=0]="FounderView",i[i.MemberView=1]="MemberView",i[i.DefaultView=2]="DefaultView",w;var i})(),Gn=d(2603);function In(i,n){1&i&&(e.TgZ(0,"div",12),e._UZ(1,"app-loading-indicator"),e.qZA())}function kn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"span"),e._uU(1," | "),e.TgZ(2,"a",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showUserDetails(a.userId))}),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.userNickname)}}const qn=function(i){return{"font-size":i}},Nn=function(i){return{"dragon-first":i}};function Fn(i,n){if(1&i&&(e.TgZ(0,"div",13),e._uU(1),e.ALo(2,"shortNumber"),e.ALo(3,"translate"),e.YNc(4,kn,4,1,"span",14),e.qZA()),2&i){const t=n.$implicit,o=n.index;e.Q6J("ngStyle",e.VKq(12,qn,"clamp(13px, "+(18-1.5*o)+"px, 18px)"))("ngClass",e.VKq(14,Nn,0===o)),e.xp6(1),e.xDo(" ",o+1,". ",t.name," [",t.level,"] | ",e.lcZ(2,8,t.experience)," ",e.lcZ(3,10,"dragon.exp")," "),e.xp6(3),e.Q6J("ngIf",t.userNickname)}}class z{constructor(n,t){this.router=n,this.dragonController=t,this.dragons$=new h.y,this.dragonsLoading=!1}ngOnInit(){this.getTopDragons()}getTopDragons(){this.dragons$=this.dragonController.getBest()}showUserDetails(n){this.router.navigate(["game","profile",n])}}function Sn(i,n){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"app-loading-indicator"),e.qZA())}function $n(i,n){if(1&i&&(e.TgZ(0,"div",9),e._UZ(1,"app-item-display",10),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("item",t)}}function Jn(i,n){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,$n,2,1,"div",8),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}z.\u0275fac=function(n){return new(n||z)(e.Y36(C.F0),e.Y36(s.GE))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-home"]],decls:260,vars:10,consts:[[1,"wrapper-main"],["currentLocation","home"],[1,"wrapper-content"],[1,"section-news"],[1,"title"],[1,"wrapper-news"],[1,"item-news"],[2,"color","gold"],[1,"wrapper-dragons"],["style","margin-top: 50px;",4,"ngIf"],[1,"reports-scroll"],["class","item-dragon",3,"ngStyle","ngClass",4,"ngFor","ngForOf"],[2,"margin-top","50px"],[1,"item-dragon",3,"ngStyle","ngClass"],[4,"ngIf"],[3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"p")(10,"b"),e._uU(11,"20.05.2023 "),e._UZ(12,"br"),e._uU(13,"Update - the Power Dragon."),e.qZA()(),e._uU(14," 1. New dragon nature is available, it can be unlocked by the Dragon tamer."),e._UZ(15,"br"),e._uU(16," 2. Updated cost of some dragon-related actions. "),e._UZ(17,"br"),e._uU(18," 3. Fixed multiple guild role assignment bug. "),e._UZ(19,"br"),e._uU(20," 4. Modernized authentication mechanism. "),e._UZ(21,"br"),e._uU(22," 5. Next update: Guilds (resources & constructs). "),e.qZA(),e.TgZ(23,"div",6)(24,"p")(25,"b"),e._uU(26,"22.04.2023 "),e._UZ(27,"br"),e._uU(28,"Update - Guilds I."),e.qZA()(),e._uU(29," 1. Introduced first part of the Guild mechanic. Players can now found and manage guilds."),e._UZ(30,"br"),e._uU(31," 2. End of the First Anniversary event, expedition stats are back to normal. "),e._UZ(32,"br"),e._uU(33," 3. Minor bug & display fixes. "),e._UZ(34,"br"),e._uU(35," 4. Next update: new dragon nature. "),e.qZA(),e.TgZ(36,"div",6)(37,"p")(38,"b",7),e._uU(39,"01.04.2023 "),e._UZ(40,"br"),e._uU(41,"Update - First Anniversary event."),e.qZA()(),e._uU(42," 1. For a limited amount of time, a special expedition will be available. "),e._UZ(43,"br"),e._uU(44," 2. During the event, all expeditions will require 50% less time to complete. "),e._UZ(45,"br"),e._uU(46," 3. Guilds are almost finished and should be done by the end of April. "),e._UZ(47,"br"),e._uU(48," 4. Increased the allowed size of avatars up to 200 kB. "),e._UZ(49,"br"),e._uU(50," 5. Next update: Guilds (social). "),e.qZA(),e.TgZ(51,"div",6)(52,"p")(53,"b"),e._uU(54,"01.02.2023 "),e._UZ(55,"br"),e._uU(56,"Technical review."),e.qZA()(),e._uU(57," 1. End of the New Year's event, expedition stats are back to normal. "),e._UZ(58,"br"),e._uU(59," 2. Backend perfomance upgrade. "),e._UZ(60,"br"),e._uU(61," 3. Next update: Guilds (social). "),e.qZA(),e.TgZ(62,"div",6)(63,"p")(64,"b",7),e._uU(65,"01.01.2023 "),e._UZ(66,"br"),e._uU(67,"Update - New Year's event."),e.qZA()(),e._uU(68," 1. For a limited amount of time, a special expedition will be available. "),e._UZ(69,"br"),e._uU(70," 2. During the event, all expeditions will require 50% less time to complete. "),e._UZ(71,"br"),e._uU(72," 3. Implemented password recovery and improved backend safety - rate limiting. "),e._UZ(73,"br"),e._uU(74," 4. Next update: backend performance, Angular version update. "),e.qZA(),e.TgZ(75,"div",6)(76,"p")(77,"b"),e._uU(78,"11.12.2022 "),e._UZ(79,"br"),e._uU(80,"Technical review."),e.qZA()(),e._uU(81," 1. QoL changes - marketplace auction form, new tooltips. "),e._UZ(82,"br"),e._uU(83," 2. Frontend optimization - refactored change detection, disposal of Bootstrap lib. "),e._UZ(84,"br"),e._uU(85," 3. Safety - updated JWT mechanism, added automated tests. "),e._UZ(86,"br"),e._uU(87," 4. Next update: New Year's event. "),e.qZA(),e.TgZ(88,"div",6)(89,"p")(90,"b"),e._uU(91,"20.09.2022 "),e._UZ(92,"br"),e._uU(93,"Update - User roles."),e.qZA()(),e._uU(94," 1. Introduced new user roles - Moderators and Administrators. "),e._UZ(95,"br"),e._uU(96," 2. Players can now be muted or banned for an inappropriate behavior. "),e._UZ(97,"br"),e._uU(98," 3. Players can now view profiles by clicking on a nickname in the Shoutbox tab. "),e._UZ(99,"br"),e._uU(100," 4. Next update: performacne optimization, code refactoring. "),e.qZA(),e.TgZ(101,"div",6)(102,"p")(103,"b"),e._uU(104,"13.08.2022 "),e._UZ(105,"br"),e._uU(106,"Update - Social medias."),e.qZA()(),e._uU(107," 1. Introduced user profiles. "),e._UZ(108,"br"),e._uU(109," 2. Added achievements and friends mechanics. "),e._UZ(110,"br"),e._uU(111," 3. Updated lore-related graphics. "),e._UZ(112,"br"),e._uU(113," 4. For the next week expeditions and dragon feeding will require 50% less time to complete. "),e._UZ(114,"br"),e._uU(115," 5. Next update: Player roles, banning system & marketplace bots. "),e.qZA(),e.TgZ(116,"div",6)(117,"p")(118,"b"),e._uU(119,"25.06.2022 "),e._UZ(120,"br"),e._uU(121,"Update - Expeditions expansion."),e.qZA()(),e._uU(122," 1. Introduced expedition guardians. "),e._UZ(123,"br"),e._uU(124," 2. Expanded crafting section - new tinkerer, more runes. "),e._UZ(125,"br"),e._uU(126," 3. Added new dragon skills, minor skills rebalance. "),e._UZ(127,"br"),e._uU(128," 4. Removed Transient Caverns location, updated loot templates for other expeditions. "),e._UZ(129,"br"),e._uU(130," 5. Next update: Player profiles & QoL changes. "),e.qZA(),e.TgZ(131,"div",6)(132,"p")(133,"b"),e._uU(134,"05.06.2022 "),e._UZ(135,"br"),e._uU(136,"Technical review."),e.qZA()(),e._uU(137," 1. Expedition rebalance - normalized gold awards, removed experience. "),e._UZ(138,"br"),e._uU(139," 2. Updated dragon tamer offer - prices, owned dragons limit."),e._UZ(140,"br"),e._uU(141," 3. For the next week potion composing will require 50% less time. "),e._UZ(142,"br"),e.qZA(),e.TgZ(143,"div",6)(144,"p")(145,"b"),e._uU(146,"27.05.2022 "),e._UZ(147,"br"),e._uU(148,"Update - Alchemy."),e.qZA()(),e._uU(149," 1. Added alchemy - now players can craft enchanted elixirs and activate temporary boosts on their dragons. "),e._UZ(150,"br"),e._uU(151," 2. New expedition added, new ingredients required for the new recipes can be found there."),e._UZ(152,"br"),e._uU(153," 3. For the next week expeditions will require 50% less time to complete. "),e._UZ(154,"br"),e._uU(155," 4. Next update: expedition guardians, new skills and equipment (end of June). "),e.qZA(),e.TgZ(156,"div",6)(157,"p")(158,"b"),e._uU(159,"15.05.2022 "),e._UZ(160,"br"),e._uU(161,"Technical review."),e.qZA()(),e._uU(162," 1. Combat system rework - the impact of attributes on the base stats has been changed, rebalanced skills, buffed magic."),e._UZ(163,"br"),e._uU(164," 2. Updated experience and stamina system - gained/lost experience is changing exponentially, stamina consumption is more constant."),e._UZ(165,"br"),e._uU(166," 3. Dragon's battle statistics can now be displayed in My Dragon's section."),e._UZ(167,"br"),e._uU(168," 4. For the next week, skill reset and nature change offered by Dragon Tamer will be 10x cheaper. "),e._UZ(169,"br"),e._uU(170," 5. Next update: alchemy - extracts, boosters (end of May). "),e.qZA(),e.TgZ(171,"div",6)(172,"p")(173,"b"),e._uU(174,"08.05.2022 "),e._UZ(175,"br"),e._uU(176,"Update - Mirage Islands."),e.qZA()(),e._uU(177," 1. A new expedition location has been discovered! This mysterious place hides the remains of relics from another dimension that the dragon summoner may use in her research."),e._UZ(178,"br"),e._uU(179," 2. Added 18 new skills including active skills that require mana and skills for another natures. Some of the existing skills were rebalanced."),e._UZ(180,"br"),e._uU(181," 3. Miracle Fruits were removed from regular expedition loots and will only be available during special events in the future. "),e._UZ(182,"br"),e._uU(183," 4. For the next week expeditions will require 50% less time to complete. "),e._UZ(184,"br"),e._uU(185," 5. Next update: combat system rework (skill multipliers, base attributes, relative strength), battle statistics preview. "),e.qZA(),e.TgZ(186,"div",6)(187,"p")(188,"b"),e._uU(189,"28.04.2022 "),e._UZ(190,"br"),e._uU(191,"Technical review."),e.qZA()(),e._uU(192," 1. Updated combat experience system, now your dragons can lose experience in battles, and you will only be able to fight the same opponent twice until your dragon rests."),e._UZ(193,"br"),e._uU(194," 2. QoL changes - dragon attributes & feeding hints."),e._UZ(195,"br"),e.qZA(),e.TgZ(196,"div",6)(197,"p")(198,"b"),e._uU(199,"23.04.2022 "),e._UZ(200,"br"),e._uU(201,"Update - Dragon Tamer."),e.qZA()(),e._uU(202," 1. Dragon Tamer is out - check out his offer."),e._UZ(203,"br"),e._uU(204," 2. Expedition loots rebalance, some items required for Dragon Tamer actions will have a 2x loot chance for the next week."),e._UZ(205,"br"),e._uU(206," 3. Skills rebalance - Sound Body (gradually decreasing effect), Pugnacious Strike (calculated based on dexterity)."),e._UZ(207,"br"),e._uU(208," 4. Minor bug fixes (expedition reports) & display improvements."),e._UZ(209,"br"),e._uU(210," 5. Next update: new dragon skills and special natures"),e._UZ(211,"br"),e.qZA(),e.TgZ(212,"div",6)(213,"p")(214,"b"),e._uU(215,"18.04.2022 "),e._UZ(216,"br"),e._uU(217,"Update - Runes."),e.qZA()(),e._uU(218," 1. Battle Runes introduction."),e._UZ(219,"br"),e._uU(220," 2. Dragon attributes rebalance."),e._UZ(221,"br"),e._uU(222," 3. Extra: for the next 48 hours expedition will take 50% less time."),e._UZ(223,"br"),e._uU(224," 4. Next update: new dragon skills (& skills rebalance) and special natures. "),e.qZA(),e.TgZ(225,"div",6)(226,"p")(227,"b"),e._uU(228,"13.04.2022 "),e._UZ(229,"br"),e._uU(230,"Technical review."),e.qZA()(),e._uU(231," 1. New experience formula, experience gained to this point was normalized."),e._UZ(232,"br"),e._uU(233," 2. QoL changes - expedition timers, expedition report mails."),e._UZ(234,"br"),e._uU(235," 3. Minor display fixes."),e._UZ(236,"br"),e._uU(237," 4. Expedition time is back to normal. "),e._UZ(238,"br"),e._uU(239," 5. Next update: full rune implementation. "),e.qZA(),e.TgZ(240,"div",6)(241,"p")(242,"b"),e._uU(243,"10.04.2022 "),e._UZ(244,"br"),e._uU(245,"Technical review."),e.qZA()(),e._uU(246," 1. New loots added to existing expeditions."),e._UZ(247,"br"),e._uU(248," 2. New game mechanic - rune crafting (for now runes do not have any statistics which will be introduced in a future update). "),e._UZ(249,"br"),e._uU(250," 3. For the next 2 days the expedition time will be cut in half."),e._UZ(251,"br"),e.qZA()()(),e.TgZ(252,"div",8)(253,"div",4),e._uU(254),e.ALo(255,"translate"),e.qZA(),e.YNc(256,In,2,0,"div",9),e.TgZ(257,"div",10),e.YNc(258,Fn,5,16,"div",11),e.ALo(259,"async"),e.qZA()()()()),2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,4,"game.recentChanges")),e.xp6(249),e.Oqu(e.lcZ(255,6,"game.bestDragons")),e.xp6(2),e.Q6J("ngIf",t.dragonsLoading),e.xp6(2),e.Q6J("ngForOf",e.lcZ(259,8,t.dragons$)))},dependencies:[c.mk,c.sg,c.O5,c.PC,f.g,v.Q,c.Ov,m.X$,Gn.H],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-content[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));padding:10px}.wrapper-news[_ngcontent-%COMP%]{height:clamp(0px,60vh,600px);overflow:auto}.title[_ngcontent-%COMP%]{margin-bottom:1rem}.item-news[_ngcontent-%COMP%]{margin-top:10px;text-align:left;box-shadow:inset 1px 1px 12px 1px #242936;background-color:#24293666;padding:10px;font-style:italic;letter-spacing:.8px}.item-news[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;padding-right:10px;float:left}.item-news[_ngcontent-%COMP%]:first-of-type{margin-top:0}.item-dragon[_ngcontent-%COMP%]{margin-bottom:4px;padding:4px;box-shadow:inset 1px 1px 12px 1px #c5a45f;background-color:#c5a45f0d;letter-spacing:1px}.item-dragon[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #d3b984}.item-dragon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.item-dragon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:underline}.dragon-first[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 12px 1px #17a2b8;background-color:#17a2b80d}.dragon-first[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 1px 12px 1px #1fc8e3}@media screen and (max-width: 990px){.wrapper-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px 0px;padding:10px}}"],changeDetection:0});class V{constructor(n,t,o){this.itemController=n,this.engineSerivce=t,this.itemsService=o,this.gold=0,this.ownedItems$=new h.y}ngOnInit(){this.getOwnedItems(),this.gold=this.engineSerivce.user.gold}getOwnedItems(){this.ownedItems$=this.itemController.getOwnedItems().pipe((0,_.U)(n=>n.data.map(t=>this.itemsService.toDisplayItem(t))))}}V.\u0275fac=function(n){return new(n||V)(e.Y36(s.l3),e.Y36(A.S),e.Y36(ce.L))},V.\u0275cmp=e.Xpm({type:V,selectors:[["app-inventory"]],decls:10,vars:8,consts:[[1,"wrapper-main"],["currentLocation","inventory"],[1,"wrapper-content"],[1,"label-gold"],["itemsLoading",""],["class","wrapper-items",4,"ngIf","ngIfElse"],[2,"margin-top","50px"],[1,"wrapper-items"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[2,"width","55px","height","55px",3,"item"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Sn,2,0,"ng-template",null,4,e.W1O),e.YNc(8,Jn,2,1,"div",5),e.ALo(9,"async"),e.qZA()()),2&n){const o=e.MAs(7);e.xp6(4),e.AsE(" ",e.lcZ(5,4,"inventory.gold"),": ",t.gold," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(9,6,t.ownedItems$))("ngIfElse",o)}},dependencies:[c.sg,c.O5,f.g,v.Q,ue.s,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-content[_ngcontent-%COMP%]{overflow-x:visible}.wrapper-items[_ngcontent-%COMP%]{margin:10px 1rem;display:grid;gap:2px;grid-template-columns:repeat(auto-fit,56px);grid-template-rows:repeat(auto-fit,56px);justify-content:left}.label-gold[_ngcontent-%COMP%]{margin:5px 0px 15px 1rem;font-size:18px;text-align:left;letter-spacing:.7px;color:#d3b984}.item[_ngcontent-%COMP%]{width:56px;height:56px;display:flex;border-radius:4px}@media screen and (max-width: 990px){.wrapper-items[_ngcontent-%COMP%]{justify-content:center}}"],changeDetection:0});var En=d(9009);function Dn(i,n){1&i&&(e.TgZ(0,"div",8),e._UZ(1,"app-loading-indicator"),e.qZA())}function Qn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return r.displayComposeModal=!0,e.KtG(r.replyName=a.senderName)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"mails.reply")," "))}function Yn(i,n){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"hr")(2,"div",16),e.YNc(3,Qn,3,3,"div",17),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("innerHTML",t.message.length?t.message:"---",e.oJD),e.xp6(1),e.Q6J("ngIf",t.senderId)}}const Rn=function(i){return{"mail-new":i}};function Kn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.openMail(r))}),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"b"),e._uU(6),e.qZA()(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"b"),e._uU(11),e.qZA()(),e.TgZ(12,"div",13),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.YNc(15,Yn,4,2,"div",14),e.qZA()}if(2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(14,Rn,!t.isRead)),e.xp6(2),e.hij("",e.lcZ(4,7,"mails.sender"),": "),e.xp6(3),e.Oqu(t.senderName),e.xp6(2),e.hij("",e.lcZ(9,9,"mails.topic"),": "),e.xp6(3),e.Oqu(t.topic),e.xp6(2),e.Oqu(e.xi3(14,11,t.sentDate,"short")),e.xp6(2),e.Q6J("ngIf",t.id===o.activeMailId)}}function Hn(i,n){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,Kn,16,16,"div",10),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function jn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getMails(!1))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getMails(!0))}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.canGetPrev),e.xp6(1),e.hij(" ",e.lcZ(3,4,"common.prev")," "),e.xp6(2),e.Q6J("disabled",!t.canGetNext),e.xp6(1),e.hij(" ",e.lcZ(6,6,"common.next")," ")}}function Bn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-mail-send-modal",21),e.NdJ("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayComposeModal=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("replyName",t.replyName)}}class ee{constructor(n){this.mailController=n,this.currentPage=0,this.pageLimit=8,this.canGetNext=!1,this.canGetPrev=!1,this.activeMailId=null,this.displayComposeModal=!1,this.replyName=null}ngOnInit(){this.getMails(),this.canGetNext=!0,this.canGetPrev=!0}getMails(n){!0===n&&(this.currentPage+=1),!1===n&&(this.currentPage-=1),this.mails$=this.mailController.getAll({limit:this.pageLimit,page:this.currentPage}).pipe((0,u.b)(o=>{this.canGetPrev=0!==this.currentPage,this.canGetNext=(this.currentPage+1)*this.pageLimit<=o.meta.totalItems-1}),(0,_.U)(o=>o.data))}openMail(n){this.activeMailId=this.activeMailId!==n.id?n.id:null,!1===n.isRead&&this.mailController.read(n.id.toString()).subscribe(),n.isRead=!0}}ee.\u0275fac=function(n){return new(n||ee)(e.Y36(s.vE))},ee.\u0275cmp=e.Xpm({type:ee,selectors:[["app-mail"]],decls:12,vars:9,consts:[[1,"wrapper-main"],["currentLocation","mail"],[1,"wrapper-content"],["mailsLoading",""],["class","wrapper-mails",4,"ngIf","ngIfElse"],["class","wrapper-menu",4,"ngIf"],[1,"btn-base","btn-send",3,"click"],[3,"replyName","close",4,"ngIf"],[2,"margin","162px auto"],[1,"wrapper-mails"],["class","item-mail",4,"ngFor","ngForOf"],[1,"item-mail"],[1,"mail-meta",3,"ngClass","click"],[1,"no-mobile"],["class","mail-content",4,"ngIf"],[1,"mail-content"],[3,"innerHTML"],["class","btn-base btn-mail",3,"click",4,"ngIf"],[1,"btn-base","btn-mail",3,"click"],[1,"wrapper-menu"],[1,"btn-base","btn-mode",3,"disabled","click"],[3,"replyName","close"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2),e.YNc(3,Dn,2,0,"ng-template",null,3,e.W1O),e.YNc(5,Hn,2,1,"div",4),e.ALo(6,"async"),e.YNc(7,jn,7,8,"div",5),e.TgZ(8,"div",6),e.NdJ("click",function(){return t.displayComposeModal=!0,t.replyName=null}),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.YNc(11,Bn,1,1,"app-mail-send-modal",7)),2&n){const o=e.MAs(4);e.xp6(5),e.Q6J("ngIf",e.lcZ(6,5,t.mails$))("ngIfElse",o),e.xp6(2),e.Q6J("ngIf",t.canGetPrev||t.canGetNext),e.xp6(2),e.hij(" ",e.lcZ(10,7,"mails.compose")," "),e.xp6(2),e.Q6J("ngIf",t.displayComposeModal)}},dependencies:[c.mk,c.sg,c.O5,f.g,v.Q,En.B,c.Ov,c.uU,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}hr[_ngcontent-%COMP%]{margin:0 auto 8px;border-top:1px solid #FFEECA;border-radius:8px}.item-mail[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 6px 1px #ffde97;background-color:#ffde970d;width:clamp(0px,95%,600px);margin:8px auto}.item-mail[_ngcontent-%COMP%]   .mail-new[_ngcontent-%COMP%]{box-shadow:inset 1px 1px 8px 1px #17a2b8;background-color:#17a2b80d}.item-mail[_ngcontent-%COMP%]   .mail-meta[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));text-align:left;padding:8px 8px 4px 12px;white-space:nowrap}.item-mail[_ngcontent-%COMP%]   .mail-meta[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}.item-mail[_ngcontent-%COMP%]   .mail-meta[_ngcontent-%COMP%]:hover{cursor:pointer}.item-mail[_ngcontent-%COMP%]   .mail-content[_ngcontent-%COMP%]{display:block;padding:8px 8px 8px 12px;text-align:left}.item-mail[_ngcontent-%COMP%]   .btn-mail[_ngcontent-%COMP%]{height:24px;margin:8px auto;display:flex;justify-content:center;line-height:24px}.btn-send[_ngcontent-%COMP%]{width:clamp(0px,95%,600px);margin:20px auto}.wrapper-menu[_ngcontent-%COMP%]{width:clamp(0px,95%,600px);margin:8px auto;display:flex;gap:2px}.wrapper-menu[_ngcontent-%COMP%]   .btn-mode[_ngcontent-%COMP%]{width:50%;height:25px;margin:0 auto;line-height:22px;border-radius:2px}"],changeDetection:0});var Wn=d(9646),Xn=d(4609);function zn(i,n){1&i&&(e.TgZ(0,"div",5),e._UZ(1,"app-loading-indicator"),e.qZA())}function Vn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-dragon-card",9),e.NdJ("release",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.release(a))}),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(1),e.Q6J("dragon",t)}}function ei(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.navigateAdopt())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"dragon.noOwnedDragons")),e.xp6(3),e.hij(" ",e.lcZ(6,4,"dragon.adoptFirstDragon")," "))}function ti(i,n){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Vn,2,1,"div",7),e.YNc(2,ei,7,6,"div",8),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t.ownedDragons),e.xp6(1),e.Q6J("ngIf",t.ownedDragons&&0===t.ownedDragons.length)}}const ni=function(i,n){return{ownedDragons:i,releaseDragon:n}};class te{constructor(n,t,o,a){this.router=n,this.actionController=t,this.dragonController=o,this.toastService=a,this.dragonsLoading$=new b.X(!1)}ngOnInit(){this.getOwnedDragons()}getOwnedDragons(){this.dragonsLoading$.next(!0),this.ownedDragons$=this.dragonController.getOwned().pipe((0,u.b)(()=>this.dragonsLoading$.next(!1)))}navigateAdopt(){this.router.navigate(["game","adopt-dragon"])}release(n){this.dragonsLoading$.next(!0),this.ownedDragons$=void 0,this.releaseDragon$=this.actionController.releaseDragon(n.toString()).pipe((0,u.b)(()=>{this.getOwnedDragons(),this.toastService.showSuccess("common.success","dragon.dragonReleased")}),(0,Z.K)(()=>(this.dragonsLoading$.next(!1),(0,Wn.of)(void 0))))}}te.\u0275fac=function(n){return new(n||te)(e.Y36(C.F0),e.Y36(s.iQ),e.Y36(s.GE),e.Y36(x.k))},te.\u0275cmp=e.Xpm({type:te,selectors:[["app-my-dragons"]],decls:8,vars:11,consts:[[1,"wrapper-main"],["currentLocation","my-dragons"],[1,"wrapper-content"],["style","margin-top: 50px;",4,"ngIf"],["class","wrapper-dragons",4,"ngIf"],[2,"margin-top","50px"],[1,"wrapper-dragons"],[4,"ngFor","ngForOf"],["class","wrapper-adopt",4,"ngIf"],[3,"dragon","release"],[1,"wrapper-adopt"],[1,"title"],[1,"btn-base","btn-adopt",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2),e.YNc(3,zn,2,0,"div",3),e.ALo(4,"async"),e.YNc(5,ti,3,2,"div",4),e.ALo(6,"async"),e.ALo(7,"async"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,t.dragonsLoading$)),e.xp6(2),e.Q6J("ngIf",e.WLB(8,ni,e.lcZ(6,4,t.ownedDragons$),e.lcZ(7,6,t.releaseDragon$))))},dependencies:[c.sg,c.O5,f.g,v.Q,Xn.B,c.Ov,m.X$],styles:[".wrapper-content[_ngcontent-%COMP%]{padding-top:0}.btn-adopt[_ngcontent-%COMP%]{margin-top:25px}"],changeDetection:0});var xe=d(5963),M=(()=>{return(i=M||(M={})).Error="Error",i.General="General",i.OffTopic="OffTopic",M;var i})(),ii=d(5085),oi=d(2340);class L extends ii.s{constructor(n){const t=n.getAccessToken();super({url:oi.N.apiUrl,options:{transportOptions:{polling:{extraHeaders:{Authorization:t}}}}})}}L.\u0275fac=function(n){return new(n||L)(e.LFG(re.b))},L.\u0275prov=e.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"});class G{constructor(n){this.socket=n}sendMessage(n,t){this.socket.emit(n,t)}getMessages(n){return this.socket.connect(),this.socket.fromEvent(n)}disconnect(){this.socket.disconnect()}}G.\u0275fac=function(n){return new(n||G)(e.LFG(L))},G.\u0275prov=e.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"});var ai=d(8832);const ri=["messagesWrapper"];function si(i,n){1&i&&(e.TgZ(0,"div",12),e._UZ(1,"app-loading-indicator"),e.qZA())}function ci(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.openPenaltyModal(a,r.PenaltyType.Ban))}),e._UZ(1,"img",21),e._uU(2," | "),e.qZA()}}function li(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.openPenaltyModal(a,r.PenaltyType.Mute))}),e._UZ(1,"img",22),e._uU(2," | "),e.qZA()}}const pi=function(i){return{"message-own":i}};function di(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.YNc(1,ci,3,0,"div",18),e.YNc(2,li,3,0,"div",18),e.TgZ(3,"a",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.showUserDetails(a.userId))}),e._uU(4),e.qZA(),e._uU(5),e.ALo(6,"date"),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(2);e.Gre("item-message message-",t.userRole,""),e.Q6J("ngClass",e.VKq(12,pi,t.nickname===o.user.nickname)),e.xp6(1),e.Q6J("ngIf",o.canBan(t)),e.xp6(1),e.Q6J("ngIf",o.canMute(t)),e.xp6(2),e.Oqu(t.nickname),e.xp6(1),e.AsE(" (",e.xi3(6,9,t.date,"hh:mm"),") | ",t.data," ")}}function gi(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,di,7,14,"div",16),e.qZA()),2&i){const t=n.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.mode===o.chatMode)}}function mi(i,n){if(1&i&&(e.TgZ(0,"div",13,14),e.YNc(2,gi,2,1,"div",15),e.qZA()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function ui(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-shoutbox-penalty-modal",23),e.NdJ("penaltyInfo",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.notifyPenaltyInfo(a))})("close",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.displayPenaltyModal=!1)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("message",t.penaltyMessage)("penaltyType",t.penaltyType)}}class ne{constructor(n,t,o,a,r){this.router=n,this.translateService=t,this.chatService=o,this.repositoryService=a,this.validatorService=r,this.message="",this.tempMessages=[],this.savedMessages=[],this.chatMode=M.General,this.displayPenaltyModal=!1,this.PenaltyType=s.Co}get ChatMode(){return M}ngOnInit(){this.user=this.repositoryService.getUserData(),this.initializeChat()}initializeChat(){this.messages$=this.chatService.getMessages(M.General).pipe((0,u.b)(n=>{this.tempMessages=n}),(0,_.U)(n=>[...this.savedMessages,...n]),(0,u.b)(()=>{(0,xe.H)(0).subscribe(()=>{this.messagesWrapper&&(this.messagesWrapper.nativeElement.scrollTop=this.messagesWrapper.nativeElement.scrollHeight)}),this.savedMessages.push(...this.tempMessages)}))}changeMode(n){this.chatMode=n,(0,xe.H)(0).subscribe(()=>{this.messagesWrapper&&(this.messagesWrapper.nativeElement.scrollTop=this.messagesWrapper.nativeElement.scrollHeight)})}sendMessage(){if(this.message.length<g.lY||this.message.length>g.gc||!this.validatorService.checkBannedWords(this.message,!0))return;const n={date:Date.now(),userId:this.user.id,userRole:this.user.role,nickname:this.user.nickname,data:this.message,mode:this.chatMode};this.chatService.sendMessage(M.General,n),this.message=""}canMute(n){return n.userRole!==s.i4.Administrator&&n.userId!==this.user.id&&(this.user.role===s.i4.Moderator||this.user.role===s.i4.Administrator)}canBan(n){return n.userId!==this.user.id&&this.user.role===s.i4.Administrator}openPenaltyModal(n,t){this.penaltyMessage=n,this.penaltyType=t,this.displayPenaltyModal=!0}notifyPenaltyInfo(n){this.displayPenaltyModal=!1;const o=this.translateService.instant(n.type===s.Co.Ban?"shoutbox.banInfo":"shoutbox.muteInfo",{nickname:n.punishedNickname,duration:n.duration}),a={date:Date.now(),userId:this.user.id,userRole:this.user.role,nickname:this.user.nickname,data:o,mode:this.chatMode};this.chatService.sendMessage(M.General,a)}showUserDetails(n){this.router.navigate(["game","profile",n])}ngOnDestroy(){this.chatService.disconnect()}}ne.\u0275fac=function(n){return new(n||ne)(e.Y36(C.F0),e.Y36(m.sK),e.Y36(G),e.Y36(re.b),e.Y36(ae.o))},ne.\u0275cmp=e.Xpm({type:ne,selectors:[["app-shoutbox"]],viewQuery:function(n,t){if(1&n&&e.Gf(ri,5),2&n){let o;e.iGM(o=e.CRH())&&(t.messagesWrapper=o.first)}},decls:21,vars:15,consts:[[1,"wrapper-main"],["currentLocation","shoutbox"],[1,"wrapper-content"],[1,"wrapper-chat"],[1,"wrapper-topics"],[1,"btn-base","btn-chat-topic",3,"click"],["messagesLoading",""],["class","wrapper-messages",4,"ngIf","ngIfElse"],[1,"wrapper-form"],["type","text",1,"input-chat",3,"ngModel","ngModelChange"],[1,"btn-base","btn-send",3,"click"],[3,"message","penaltyType","penaltyInfo","close",4,"ngIf"],[2,"margin","50px auto"],[1,"wrapper-messages"],["messagesWrapper",""],[4,"ngFor","ngForOf"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["class","item-ban",3,"click",4,"ngIf"],[3,"click"],[1,"item-ban",3,"click"],["src","assets/img/icons/ban-user.svg","alt","ban"],["src","assets/img/icons/mute-user.svg","alt","mute"],[3,"message","penaltyType","penaltyInfo","close"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.NdJ("click",function(){return t.changeMode(t.ChatMode.General)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",5),e.NdJ("click",function(){return t.changeMode(t.ChatMode.OffTopic)}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.YNc(11,si,2,0,"ng-template",null,6,e.W1O),e.YNc(13,mi,3,1,"div",7),e.ALo(14,"async"),e.TgZ(15,"div",8)(16,"input",9),e.NdJ("ngModelChange",function(a){return t.message=a}),e.qZA(),e.TgZ(17,"div",10),e.NdJ("click",function(){return t.sendMessage()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()()()(),e.YNc(20,ui,1,2,"app-shoutbox-penalty-modal",11)),2&n){const o=e.MAs(12);e.xp6(6),e.hij(" ",e.lcZ(7,7,"shoutbox.general")," "),e.xp6(3),e.hij(" ",e.lcZ(10,9,"shoutbox.offtopic")," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,11,t.messages$))("ngIfElse",o),e.xp6(3),e.Q6J("ngModel",t.message),e.xp6(2),e.hij(" ",e.lcZ(19,13,"shoutbox.send")," "),e.xp6(2),e.Q6J("ngIf",t.displayPenaltyModal)}},dependencies:[c.mk,c.sg,c.O5,l.Fj,l.JJ,l.On,f.g,v.Q,ai.g,c.Ov,c.uU,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-chat[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.wrapper-topics[_ngcontent-%COMP%]{width:clamp(0px,95%,800px);margin:auto;display:flex;gap:1px}.btn-chat-topic[_ngcontent-%COMP%]{width:50%;line-height:2}.btn-chat-topic[_ngcontent-%COMP%]:first-of-type{border-radius:6px 0 0 2px}.btn-chat-topic[_ngcontent-%COMP%]:last-of-type{border-radius:0 6px 2px 0}.wrapper-messages[_ngcontent-%COMP%]{width:clamp(0px,95%,800px);height:600px;margin:auto;overflow-y:auto;padding:4px 2px;background:#242936;border-radius:2px}.item-message[_ngcontent-%COMP%]{width:100%;margin:-2px auto;padding-left:4px;display:inline-block;letter-spacing:.5px;text-align:left;overflow:hidden;background:#2c3242}.item-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;font-weight:600}.item-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.message-own[_ngcontent-%COMP%]{background:#343c4e}.message-Moderator[_ngcontent-%COMP%]{color:#d5ff80}.message-Administrator[_ngcontent-%COMP%]{color:#ff544c}.item-ban[_ngcontent-%COMP%]{margin-top:0%;display:inline;cursor:pointer}.item-ban[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:inline-block;max-height:100%;height:16px}.wrapper-form[_ngcontent-%COMP%]{width:clamp(0px,95%,800px);margin:auto;display:flex;padding-top:0;padding-bottom:8px}.input-chat[_ngcontent-%COMP%]{width:calc(70% - 2px);height:30px;margin:0 2px 0 0;padding:4px;display:inline-block;border:none;border-radius:2px 0 0 6px}.btn-send[_ngcontent-%COMP%]{width:30%;margin-top:0;padding:0;line-height:30px;display:inline-block;border-radius:0 2px 6px 0}@media screen and (max-width: 990px){.wrapper-messages[_ngcontent-%COMP%]{max-height:60vh}.wrapper-form[_ngcontent-%COMP%]{display:block}.input-chat[_ngcontent-%COMP%]{width:100%;margin:0;border-radius:2px}.btn-send[_ngcontent-%COMP%]{min-width:100%;margin:20px 0 0;padding:0;border-radius:2px 2px 6px 6px}}"],changeDetection:0});var ie=d(4128),oe=d(5577),_i=d(1590),hi=d(4944),xi=d(1697);function fi(i,n){if(1&i&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const t=n.ngIf;e.xp6(2),e.AsE("",e.lcZ(3,2,"guild.guild"),": ",t.guildName,"")}}function vi(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",10),e._UZ(2,"img",11),e.qZA()()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("src",t,e.LSH)}}function bi(i,n){1&i&&(e.TgZ(0,"div",10),e._UZ(1,"img",12),e.qZA())}function Ci(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",13,14),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.setAvatar(a))}),e.qZA(),e.TgZ(3,"div",15),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(2);return e.KtG(a.click())}),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"user.setAvatar")," "))}function Zi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().ngIf,r=e.oxw();return e.KtG(r.requestFriend(a.id))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"user.inviteFriend")," "))}function wi(i,n){if(1&i&&(e.TgZ(0,"div",20)(1,"h3"),e._uU(2),e.qZA(),e._UZ(3,"img",21),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"br"),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("src",t.image,e.LSH)("alt",t.name),e.xp6(2),e.AsE(" ",e.lcZ(6,7,"dragon.nature"),": ",t.nature," "),e.xp6(3),e.AsE(" ",e.lcZ(9,9,"dragon.experience"),": ",t.experience," ")}}function Mi(i,n){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18),e._uU(2),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5),e.YNc(6,wi,10,11,"ng-template",null,19,e.W1O),e.qZA()()),2&i){const t=n.$implicit,o=n.index;e.xp6(2),e.hij(" ",o+1,". "),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.hij(" [",t.level,"] ")}}function Ai(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Mi,8,3,"div",16),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function yi(i,n){if(1&i&&(e.TgZ(0,"div",25)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.hint)}}function Ti(i,n){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"img",21),e.YNc(2,yi,5,2,"ng-template",null,19,e.W1O),e.qZA()),2&i){const t=e.oxw().$implicit;e.Gre("item-achievement ",t.cssClass,""),e.xp6(1),e.Q6J("src",t.image,e.LSH)("alt",t.name)}}function Oi(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ti,4,5,"div",24),e.qZA()),2&i){const t=n.$implicit,o=e.oxw().ngIf,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.user&&a.checkCompleted(t,o.user))}}function Pi(i,n){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,Oi,2,1,"div",23),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t.all)}}function Ui(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",29),e._UZ(2,"img",11),e.qZA()()),2&i){const t=n.ngIf;e.xp6(2),e.Q6J("src",t,e.LSH)}}function Li(i,n){1&i&&(e.TgZ(0,"div",29),e._UZ(1,"img",12),e.qZA())}function Gi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.showFriendDetails(r.id))}),e.YNc(1,Ui,3,1,"div",6),e.YNc(2,Li,2,0,"ng-template",null,7,e.W1O),e._uU(4),e.qZA()}if(2&i){const t=n.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.avatar)("ngIfElse",o),e.xp6(3),e.hij(" ",t.nickname," ")}}function Ii(i,n){if(1&i&&(e.TgZ(0,"div",26),e.YNc(1,Gi,5,3,"div",27),e.qZA()),2&i){const t=n.ngIf;e.xp6(1),e.Q6J("ngForOf",t)}}function ki(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-user-friend-requests",31),e.NdJ("close",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.displayFriendInvitations=!1)})("friendshipAccepted",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.updateFriends(a))}),e.qZA()}if(2&i){const t=e.oxw().ngIf;e.Q6J("friendInvitations",t)}}function qi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.displayFriendInvitations=!0)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,ki,1,1,"app-user-friend-requests",30),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"user.seeInvitations")," "),e.xp6(2),e.Q6J("ngIf",t.displayFriendInvitations)}}const Ni=function(i,n){return{all:i,user:n}};function Fi(i,n){if(1&i&&(e.TgZ(0,"div",3)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p",4),e._uU(4),e.qZA(),e.YNc(5,fi,4,4,"div",5),e.ALo(6,"async"),e.YNc(7,vi,3,1,"div",6),e.ALo(8,"async"),e.YNc(9,bi,2,0,"ng-template",null,7,e.W1O),e.YNc(11,Ci,6,3,"div",5),e.YNc(12,Zi,4,3,"div",5),e._UZ(13,"hr"),e.TgZ(14,"h2"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,Ai,2,1,"div",5),e.ALo(18,"async"),e._UZ(19,"hr"),e.TgZ(20,"h2"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.YNc(23,Pi,2,1,"div",8),e.ALo(24,"async"),e.ALo(25,"async"),e._UZ(26,"hr"),e.TgZ(27,"h2"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.YNc(30,Ii,2,1,"div",9),e.ALo(31,"async"),e.YNc(32,qi,5,4,"div",5),e.ALo(33,"async"),e.qZA()),2&i){const t=n.ngIf,o=e.MAs(10),a=e.oxw();e.xp6(2),e.Oqu(t.nickname),e.xp6(2),e.hij("[",t.role,"]"),e.xp6(1),e.Q6J("ngIf",e.lcZ(6,14,a.guild$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,16,a.avatar$))("ngIfElse",o),e.xp6(4),e.Q6J("ngIf",a.ownProfile),e.xp6(1),e.Q6J("ngIf",!a.ownProfile),e.xp6(3),e.Oqu(e.lcZ(16,18,"user.dragons")),e.xp6(2),e.Q6J("ngIf",e.lcZ(18,20,a.dragons$)),e.xp6(4),e.Oqu(e.lcZ(22,22,"user.achievements")),e.xp6(2),e.Q6J("ngIf",e.WLB(34,Ni,e.lcZ(24,24,a.allAchievements$),e.lcZ(25,26,a.userAchievements$))),e.xp6(5),e.Oqu(e.lcZ(29,28,"user.friends")),e.xp6(2),e.Q6J("ngIf",e.lcZ(31,30,a.friends$)),e.xp6(2),e.Q6J("ngIf",a.ownProfile&&e.lcZ(33,32,a.friendInvitations$))}}class I{constructor(n,t,o,a,r,p,y,Ji,Ei,Di,Qi,Yi){this.cdRef=n,this.route=t,this.router=o,this.achievementsController=a,this.dragonController=r,this.userController=p,this.guildController=y,this.userControllerHelper=Ji,this.engineService=Ei,this.dragonService=Di,this.itemService=Qi,this.toastService=Yi,this.ownProfile=!1,this.displayFriendInvitations=!1}ngOnInit(){this.route.paramMap.subscribe(n=>{const t=this.engineService.user.id,o=n.get("id");o&&t!==+o?this.getOtherUserData(o):(this.ownProfile=!0,this.getUserData())}),this.allAchievements$=this.achievementsController.getAllAchievements().pipe((0,_.U)(n=>n.map(t=>this.itemService.toDisplayAchievement(t))))}getUserData(){this.user$=this.engineService.getUser(),this.avatar$=this.userControllerHelper.getAvatar(),this.userAchievements$=this.achievementsController.getUserAchievements(),this.friends$=this.userController.getFriends().pipe((0,oe.z)(n=>(0,ie.D)(n.map(t=>this.userControllerHelper.getAvatarPublic(t.id).pipe((0,_.U)(o=>({...t,avatar:o}))))))),this.friendInvitations$=this.userController.getPendingFriendshipRequests().pipe((0,oe.z)(n=>(0,ie.D)(n.map(t=>this.userControllerHelper.getAvatarPublic(t.requesterId).pipe((0,_.U)(o=>({...t,avatar:o}))))))),this.dragons$=this.dragonController.getOwned().pipe((0,_.U)(n=>n.map(t=>this.dragonService.toDisplayDragon(t)))),this.guild$=this.guildController.checkUserGuild(this.engineService.user.id)}getOtherUserData(n){this.user$=this.userController.getPublicData(n),this.avatar$=this.userControllerHelper.getAvatarPublic(n),this.userAchievements$=this.achievementsController.getUserPublicAchievements(n),this.friends$=this.userController.getFriendsPublic(n).pipe((0,oe.z)(t=>(0,ie.D)(t.map(o=>this.userControllerHelper.getAvatarPublic(o.id).pipe((0,_.U)(a=>({...o,avatar:a}))))))),this.dragons$=this.dragonController.getPublicPlayerDragons(n).pipe((0,_.U)(t=>t.map(o=>this.dragonService.toDisplayDragonPublic(o)))),this.guild$=this.guildController.checkUserGuild(+n)}requestFriend(n){this.userController.requestFriendship({targetUserId:n}).subscribe(()=>{this.toastService.showSuccess("common.success","user.friendInvitationSent")})}updateFriends(n){this.displayFriendInvitations=!1,this.friendInvitations$=this.userController.getPendingFriendshipRequests().pipe((0,oe.z)(t=>(0,ie.D)(t.map(o=>this.userControllerHelper.getAvatarPublic(o.requesterId).pipe((0,_.U)(a=>({...o,avatar:a}))))))),n?(this.toastService.showSuccess("common.success","user.requestAccepted"),this.friends$=this.userController.getFriends().pipe((0,oe.z)(t=>(0,ie.D)(t.map(o=>this.userControllerHelper.getAvatarPublic(o.id).pipe((0,_.U)(a=>({...o,avatar:a})))))))):this.toastService.showSuccess("common.success","user.requestDeclined")}setAvatar(n){n.target.files[0]&&this.userControllerHelper.setAvatar(n.target.files[0]).subscribe(()=>{this.avatar$=this.userControllerHelper.getAvatar(),this.toastService.showSuccess("common.success","user.avatarSet"),this.cdRef.detectChanges()})}showFriendDetails(n){this.router.navigate(["game","profile",n])}checkCompleted(n,t){return t[n.uid]>=n.tier}}I.\u0275fac=function(n){return new(n||I)(e.Y36(e.sBO),e.Y36(C.gz),e.Y36(C.F0),e.Y36(s.ph),e.Y36(s.GE),e.Y36(s.st),e.Y36(s.oZ),e.Y36(_i.v),e.Y36(A.S),e.Y36(hi.x),e.Y36(ce.L),e.Y36(x.k))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-user-profile"]],decls:4,vars:3,consts:[[1,"wrapper-main"],["currentLocation","profile"],["class","wrapper-content",4,"ngIf"],[1,"wrapper-content"],[2,"margin-top","-10px"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noAvatar",""],["class","wrapper-achievements",4,"ngIf"],["class","wrapper-friends",4,"ngIf"],[1,"item-avatar"],["alt","avatar","draggable","false",3,"src"],["src","assets/img/lore/player.png","alt","avatar","draggable","false"],["type","file",1,"gone",3,"change"],["fileUpload",""],[1,"btn-base","btn-avatar",3,"click"],["class","item-dragon",4,"ngFor","ngForOf"],[1,"item-dragon"],["tooltip",""],["tooltipTemplate",""],[1,"item-tooltip","dragon-tooltip"],["draggable","false",3,"src","alt"],[1,"wrapper-achievements"],[4,"ngFor","ngForOf"],["tooltip","",3,"class",4,"ngIf"],[1,"item-tooltip","achievement-tooltip"],[1,"wrapper-friends"],["class","item-friend",3,"click",4,"ngFor","ngForOf"],[1,"item-friend",3,"click"],[1,"item-friend-avatar"],[3,"friendInvitations","close","friendshipAccepted",4,"ngIf"],[3,"friendInvitations","close","friendshipAccepted"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-navigation-bar",1),e.YNc(2,Fi,34,37,"div",2),e.ALo(3,"async"),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,t.user$)))},dependencies:[c.sg,c.O5,f.g,xi.N,he.i,c.Ov,m.X$],styles:[".color-Common[_ngcontent-%COMP%]{color:#bbc3c8}.color-Scarce[_ngcontent-%COMP%]{color:#cdc90b}.color-Rare[_ngcontent-%COMP%]{color:#c967eb}.color-Mythical[_ngcontent-%COMP%]{color:#00e1e1}.wrapper-content[_ngcontent-%COMP%]{padding:1rem;text-align:left}.wrapper-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:400;letter-spacing:.5px}.wrapper-content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:5px 0;border:0;border-top:.5px dashed #FFEECA;opacity:.5}.item-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;width:200px;object-fit:cover}.btn-avatar[_ngcontent-%COMP%]{width:160px;height:18px;margin:10px 0;line-height:16px;text-align:center}.item-dragon[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;letter-spacing:.5px;cursor:help}.dragon-tooltip[_ngcontent-%COMP%]{width:220px;padding:10px 5px 0;text-align:center}.dragon-tooltip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px}.wrapper-achievements[_ngcontent-%COMP%]{padding:6px 0;display:flex;flex-wrap:wrap}.item-achievement[_ngcontent-%COMP%]{width:60px;margin:3px 6px 3px 0}.item-achievement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.achievement-tooltip[_ngcontent-%COMP%]{box-shadow:inset 0 0 2px 1px #000}.achievement-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgb(187,195,200)}.achievement-2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgb(205,201,11)}.achievement-3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid rgb(201,103,235)}.wrapper-friends[_ngcontent-%COMP%]{display:flex}.item-friend[_ngcontent-%COMP%]{width:60px;margin:3px 6px 3px 0;text-align:center;cursor:pointer}.item-friend-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:60px;border:2px solid #FFEECA;border-radius:50%}"],changeDetection:0});const Si=[{path:"home",component:z},{path:"profile",component:I},{path:"profile/:id",component:I},{path:"adopt-dragon",component:N},{path:"my-dragons",component:te},{path:"summon-dragon",component:J},{path:"dragon-tamer",component:E},{path:"inventory",component:V},{path:"expeditions",component:D},{path:"arena",component:O},{path:"arena/:id",component:O},{path:"auctions",component:S},{path:"mail",component:ee},{path:"shoutbox",component:ne},{path:"crafting",component:$},{path:"alchemy",component:F},{path:"guild",component:X},{path:"**",redirectTo:"home",pathMatch:"full"}];class k{}k.\u0275fac=function(n){return new(n||k)},k.\u0275mod=e.oAB({type:k}),k.\u0275inj=e.cJS({imports:[C.Bz.forChild(Si),C.Bz]});var $i=d(294);class q{}q.\u0275fac=function(n){return new(n||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({imports:[c.ez,l.u5,k,$i.I.forChild()]})}}]);